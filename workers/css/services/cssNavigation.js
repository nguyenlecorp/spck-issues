!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports","../parser/cssNodes","vscode-languageserver-types","../parser/cssSymbolScope","../services/languageFacts","vscode-nls"],e)}(function(e,t){"use strict";function n(e,t){var n=s.getColorValue(e);return n?{color:n,range:r(e,t)}:null}function r(e,t){return u.Range.create(t.positionAt(e.offset),t.positionAt(e.end))}function o(e){if(e.type===i.NodeType.Selector)return u.DocumentHighlightKind.Write;if(e instanceof i.Identifier&&e.parent&&e.parent instanceof i.Property&&e.isCustomProperty)return u.DocumentHighlightKind.Write;if(e.parent)switch(e.parent.type){case i.NodeType.FunctionDeclaration:case i.NodeType.MixinDeclaration:case i.NodeType.Keyframe:case i.NodeType.VariableDeclaration:case i.NodeType.FunctionParameter:return u.DocumentHighlightKind.Write}return u.DocumentHighlightKind.Read}function a(e){var t=e.toString(16);return 2!==t.length?"0"+t:t}Object.defineProperty(t,"__esModule",{value:!0});var i=e("../parser/cssNodes"),u=e("vscode-languageserver-types"),c=e("../parser/cssSymbolScope"),s=e("../services/languageFacts"),l=e("vscode-nls").loadMessageBundle(),d=function(){function e(){}return e.prototype.findDefinition=function(e,t,n){var o=new c.Symbols(n),a=e.offsetAt(t),u=i.getNodeAtOffset(n,a);if(!u)return null;var s=o.findSymbolFromNode(u);return s?{uri:e.uri,range:r(s.node,e)}:null},e.prototype.findReferences=function(e,t,n){return this.findDocumentHighlights(e,t,n).map(function(t){return{uri:e.uri,range:t.range}})},e.prototype.findDocumentHighlights=function(e,t,n){var a=[],u=e.offsetAt(t),s=i.getNodeAtOffset(n,u);if(!s||s.type===i.NodeType.Stylesheet||s.type===i.NodeType.Declarations)return a;var l=new c.Symbols(n),d=l.findSymbolFromNode(s),f=s.getText();return n.accept(function(t){if(d){if(l.matchesSymbol(t,d))return a.push({kind:o(t),range:r(t,e)}),!1}else s.type===t.type&&s.length===t.length&&f===t.getText()&&a.push({kind:o(t),range:r(t,e)});return!0}),a},e.prototype.findDocumentSymbols=function(e,t){var n=[];return t.accept(function(t){var o={name:null,kind:u.SymbolKind.Class,location:null},a=t;return t instanceof i.Selector?(o.name=t.getText(),a=t.findParent(i.NodeType.Ruleset)):t instanceof i.VariableDeclaration?(o.name=t.getName(),o.kind=u.SymbolKind.Variable):t instanceof i.MixinDeclaration?(o.name=t.getName(),o.kind=u.SymbolKind.Method):t instanceof i.FunctionDeclaration?(o.name=t.getName(),o.kind=u.SymbolKind.Function):t instanceof i.Keyframe?o.name=l("literal.keyframes","@keyframes {0}",t.getName()):t instanceof i.FontFace&&(o.name=l("literal.fontface","@font-face")),o.name&&(o.location=u.Location.create(e.uri,r(a,e)),n.push(o)),!0}),n},e.prototype.findDocumentColors=function(e,t){var r=[];return t.accept(function(t){var o=n(t,e);return o&&r.push(o),!0}),r},e.prototype.getColorPresentations=function(e,t,n,r){var o,i=[],c=Math.round(255*n.red),l=Math.round(255*n.green),d=Math.round(255*n.blue);o=1===n.alpha?"rgb("+c+", "+l+", "+d+")":"rgba("+c+", "+l+", "+d+", "+n.alpha+")",i.push({label:o,textEdit:u.TextEdit.replace(r,o)}),o=1===n.alpha?"#"+a(c)+a(l)+a(d):"#"+a(c)+a(l)+a(d)+a(Math.round(255*n.alpha)),i.push({label:o,textEdit:u.TextEdit.replace(r,o)});var f=s.hslFromColor(n);return o=1===f.a?"hsl("+f.h+", "+Math.round(100*f.s)+"%, "+Math.round(100*f.l)+"%)":"hsla("+f.h+", "+Math.round(100*f.s)+"%, "+Math.round(100*f.l)+"%, "+f.a+")",i.push({label:o,textEdit:u.TextEdit.replace(r,o)}),i},e.prototype.doRename=function(e,t,n,r){var o=this.findDocumentHighlights(e,t,r).map(function(e){return u.TextEdit.replace(e.range,n)});return{changes:(a={},a[e.uri]=o,a)};var a},e}();t.CSSNavigation=d});