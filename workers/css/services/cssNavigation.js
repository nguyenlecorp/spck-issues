!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports","../parser/cssNodes","vscode-languageserver-types","../parser/cssSymbolScope","../services/languageFacts","vscode-nls"],e)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("../parser/cssNodes"),r=e("vscode-languageserver-types"),o=e("../parser/cssSymbolScope"),a=e("../services/languageFacts"),i=e("vscode-nls").loadMessageBundle(),u=function(){function e(){}return e.prototype.findDefinition=function(e,t,r){var a=new o.Symbols(r),i=e.offsetAt(t),u=n.getNodeAtOffset(r,i);if(!u)return null;var s=a.findSymbolFromNode(u);return s?{uri:e.uri,range:c(s.node,e)}:null},e.prototype.findReferences=function(e,t,n){return this.findDocumentHighlights(e,t,n).map((function(t){return{uri:e.uri,range:t.range}}))},e.prototype.findDocumentHighlights=function(e,t,r){var a=[],i=e.offsetAt(t),u=n.getNodeAtOffset(r,i);if(!u||u.type===n.NodeType.Stylesheet||u.type===n.NodeType.Declarations)return a;var l=new o.Symbols(r),d=l.findSymbolFromNode(u),f=u.getText();return r.accept((function(t){if(d){if(l.matchesSymbol(t,d))return a.push({kind:s(t),range:c(t,e)}),!1}else u.type===t.type&&u.length===t.length&&f===t.getText()&&a.push({kind:s(t),range:c(t,e)});return!0})),a},e.prototype.findDocumentSymbols=function(e,t){var o=[];return t.accept((function(t){var a={name:null,kind:r.SymbolKind.Class,location:null},u=t;return t instanceof n.Selector?(a.name=t.getText(),u=t.findParent(n.NodeType.Ruleset)):t instanceof n.VariableDeclaration?(a.name=t.getName(),a.kind=r.SymbolKind.Variable):t instanceof n.MixinDeclaration?(a.name=t.getName(),a.kind=r.SymbolKind.Method):t instanceof n.FunctionDeclaration?(a.name=t.getName(),a.kind=r.SymbolKind.Function):t instanceof n.Keyframe?a.name=i("literal.keyframes","@keyframes {0}",t.getName()):t instanceof n.FontFace&&(a.name=i("literal.fontface","@font-face")),a.name&&(a.location=r.Location.create(e.uri,c(u,e)),o.push(a)),!0})),o},e.prototype.findDocumentColors=function(e,t){var n=[];return t.accept((function(t){var r=function(e,t){var n=a.getColorValue(e);if(n){var r=c(e,t);return{color:n,range:r}}return null}(t,e);return r&&n.push(r),!0})),n},e.prototype.getColorPresentations=function(e,t,n,o){var i,u=[],c=Math.round(255*n.red),s=Math.round(255*n.green),d=Math.round(255*n.blue);i=1===n.alpha?"rgb("+c+", "+s+", "+d+")":"rgba("+c+", "+s+", "+d+", "+n.alpha+")",u.push({label:i,textEdit:r.TextEdit.replace(o,i)}),i=1===n.alpha?"#"+l(c)+l(s)+l(d):"#"+l(c)+l(s)+l(d)+l(Math.round(255*n.alpha)),u.push({label:i,textEdit:r.TextEdit.replace(o,i)});var f=a.hslFromColor(n);return i=1===f.a?"hsl("+f.h+", "+Math.round(100*f.s)+"%, "+Math.round(100*f.l)+"%)":"hsla("+f.h+", "+Math.round(100*f.s)+"%, "+Math.round(100*f.l)+"%, "+f.a+")",u.push({label:i,textEdit:r.TextEdit.replace(o,i)}),u},e.prototype.doRename=function(e,t,n,o){var a,i=this.findDocumentHighlights(e,t,o).map((function(e){return r.TextEdit.replace(e.range,n)}));return{changes:(a={},a[e.uri]=i,a)}},e}();function c(e,t){return r.Range.create(t.positionAt(e.offset),t.positionAt(e.end))}function s(e){if(e.type===n.NodeType.Selector)return r.DocumentHighlightKind.Write;if(e instanceof n.Identifier&&e.parent&&e.parent instanceof n.Property&&e.isCustomProperty)return r.DocumentHighlightKind.Write;if(e.parent)switch(e.parent.type){case n.NodeType.FunctionDeclaration:case n.NodeType.MixinDeclaration:case n.NodeType.Keyframe:case n.NodeType.VariableDeclaration:case n.NodeType.FunctionParameter:return r.DocumentHighlightKind.Write}return r.DocumentHighlightKind.Read}function l(e){var t=e.toString(16);return 2!==t.length?"0"+t:t}t.CSSNavigation=u}));