!function(t){if("object"==typeof module&&"object"==typeof module.exports){var e=t(require,exports);void 0!==e&&(module.exports=e)}else"function"==typeof define&&define.amd&&define(["require","exports"],t)}(function(t,e){"use strict";var o,r;Object.defineProperty(e,"__esModule",{value:!0}),(r=o=e.TokenType||(e.TokenType={}))[r.Ident=0]="Ident",r[r.AtKeyword=1]="AtKeyword",r[r.String=2]="String",r[r.BadString=3]="BadString",r[r.UnquotedString=4]="UnquotedString",r[r.Hash=5]="Hash",r[r.Num=6]="Num",r[r.Percentage=7]="Percentage",r[r.Dimension=8]="Dimension",r[r.UnicodeRange=9]="UnicodeRange",r[r.CDO=10]="CDO",r[r.CDC=11]="CDC",r[r.Colon=12]="Colon",r[r.SemiColon=13]="SemiColon",r[r.CurlyL=14]="CurlyL",r[r.CurlyR=15]="CurlyR",r[r.ParenthesisL=16]="ParenthesisL",r[r.ParenthesisR=17]="ParenthesisR",r[r.BracketL=18]="BracketL",r[r.BracketR=19]="BracketR",r[r.Whitespace=20]="Whitespace",r[r.Includes=21]="Includes",r[r.Dashmatch=22]="Dashmatch",r[r.SubstringOperator=23]="SubstringOperator",r[r.PrefixOperator=24]="PrefixOperator",r[r.SuffixOperator=25]="SuffixOperator",r[r.Delim=26]="Delim",r[r.EMS=27]="EMS",r[r.EXS=28]="EXS",r[r.Length=29]="Length",r[r.Angle=30]="Angle",r[r.Time=31]="Time",r[r.Freq=32]="Freq",r[r.Exclamation=33]="Exclamation",r[r.Resolution=34]="Resolution",r[r.Comma=35]="Comma",r[r.Charset=36]="Charset",r[r.EscapedJavaScript=37]="EscapedJavaScript",r[r.BadEscapedJavaScript=38]="BadEscapedJavaScript",r[r.Comment=39]="Comment",r[r.SingleLineComment=40]="SingleLineComment",r[r.EOF=41]="EOF",r[r.CustomToken=42]="CustomToken";var i=function(){function t(t){this.source=t,this.len=t.length,this.position=0}return t.prototype.substring=function(t,e){return void 0===e&&(e=this.position),this.source.substring(t,e)},t.prototype.eos=function(){return this.len<=this.position},t.prototype.pos=function(){return this.position},t.prototype.goBackTo=function(t){this.position=t},t.prototype.goBack=function(t){this.position-=t},t.prototype.advance=function(t){this.position+=t},t.prototype.nextChar=function(){return this.source.charCodeAt(this.position++)||0},t.prototype.peekChar=function(t){return void 0===t&&(t=0),this.source.charCodeAt(this.position+t)||0},t.prototype.lookbackChar=function(t){return void 0===t&&(t=0),this.source.charCodeAt(this.position-t)||0},t.prototype.advanceIfChar=function(t){return t===this.source.charCodeAt(this.position)&&(this.position++,!0)},t.prototype.advanceIfChars=function(t){var e;if(this.position+t.length>this.source.length)return!1;for(e=0;e<t.length;e++)if(this.source.charCodeAt(this.position+e)!==t[e])return!1;return this.advance(e),!0},t.prototype.advanceWhileChar=function(t){for(var e=this.position;this.position<this.len&&t(this.source.charCodeAt(this.position));)this.position++;return this.position-e},t}();e.MultiLineStream=i;var s="a".charCodeAt(0),a="f".charCodeAt(0),n="z".charCodeAt(0),h="A".charCodeAt(0),c="F".charCodeAt(0),u="Z".charCodeAt(0),p="0".charCodeAt(0),C="9".charCodeAt(0),m="~".charCodeAt(0),d="^".charCodeAt(0),f="=".charCodeAt(0),v="|".charCodeAt(0),g="-".charCodeAt(0),k="_".charCodeAt(0),l="%".charCodeAt(0),A="*".charCodeAt(0),y="(".charCodeAt(0),S=")".charCodeAt(0),T="<".charCodeAt(0),_=">".charCodeAt(0),x="@".charCodeAt(0),L="#".charCodeAt(0),b="$".charCodeAt(0),B="\\".charCodeAt(0),D="/".charCodeAt(0),I="\n".charCodeAt(0),E="\r".charCodeAt(0),O="\f".charCodeAt(0),R='"'.charCodeAt(0),q="'".charCodeAt(0),P=" ".charCodeAt(0),w="\t".charCodeAt(0),F=";".charCodeAt(0),W=":".charCodeAt(0),j="{".charCodeAt(0),U="}".charCodeAt(0),M="[".charCodeAt(0),N="]".charCodeAt(0),J=",".charCodeAt(0),z=".".charCodeAt(0),H="!".charCodeAt(0),K={};K[F]=o.SemiColon,K[W]=o.Colon,K[j]=o.CurlyL,K[U]=o.CurlyR,K[N]=o.BracketR,K[M]=o.BracketL,K[y]=o.ParenthesisL,K[S]=o.ParenthesisR,K[J]=o.Comma;var X={};X.em=o.EMS,X.ex=o.EXS,X.px=o.Length,X.cm=o.Length,X.mm=o.Length,X.in=o.Length,X.pt=o.Length,X.pc=o.Length,X.deg=o.Angle,X.rad=o.Angle,X.grad=o.Angle,X.ms=o.Time,X.s=o.Time,X.hz=o.Freq,X.khz=o.Freq,X["%"]=o.Percentage,X.dpi=o.Resolution,X.dpcm=o.Resolution;var Z=function(){function t(){this.ignoreComment=!0,this.ignoreWhitespace=!0,this.inURL=!1}return t.prototype.setSource=function(t){this.stream=new i(t)},t.prototype.finishToken=function(t,e,r){return{offset:t,len:this.stream.pos()-t,type:e,text:r||this.stream.substring(t)}},t.prototype.substring=function(t,e){return this.stream.substring(t,t+e)},t.prototype.pos=function(){return this.stream.pos()},t.prototype.goBackTo=function(t){this.stream.goBackTo(t)},t.prototype.scanUnquotedString=function(){var t=this.stream.pos(),e=[];return this._unquotedString(e)?this.finishToken(t,o.UnquotedString,e.join("")):null},t.prototype.scan=function(){var t=this.trivia();if(null!==t)return t;var e=this.stream.pos();return this.stream.eos()?this.finishToken(e,o.EOF):this.scanNext(e)},t.prototype.scanNext=function(t){if(this.stream.advanceIfChars([T,H,g,g]))return this.finishToken(t,o.CDO);if(this.stream.advanceIfChars([g,g,_]))return this.finishToken(t,o.CDC);var e=[];if(this.ident(e))return this.finishToken(t,o.Ident,e.join(""));if(this.stream.advanceIfChar(x)){if(e=["@"],this._name(e)){var r=e.join("");return"@charset"===r?this.finishToken(t,o.Charset,r):this.finishToken(t,o.AtKeyword,r)}return this.finishToken(t,o.Delim)}if(this.stream.advanceIfChar(L))return e=["#"],this._name(e)?this.finishToken(t,o.Hash,e.join("")):this.finishToken(t,o.Delim);if(this.stream.advanceIfChar(H))return this.finishToken(t,o.Exclamation);if(this._number()){var i=this.stream.pos();if(e=[this.stream.substring(t,i)],this.stream.advanceIfChar(l))return this.finishToken(t,o.Percentage);if(this.ident(e)){var n=this.stream.substring(i).toLowerCase(),s=X[n];return void 0!==s?this.finishToken(t,s,e.join("")):this.finishToken(t,o.Dimension,e.join(""))}return this.finishToken(t,o.Num)}e=[];var a=this._string(e);return null!==a?this.finishToken(t,a,e.join("")):void 0!==(a=K[this.stream.peekChar()])?(this.stream.advance(1),this.finishToken(t,a)):this.stream.peekChar(0)===m&&this.stream.peekChar(1)===f?(this.stream.advance(2),this.finishToken(t,o.Includes)):this.stream.peekChar(0)===v&&this.stream.peekChar(1)===f?(this.stream.advance(2),this.finishToken(t,o.Dashmatch)):this.stream.peekChar(0)===A&&this.stream.peekChar(1)===f?(this.stream.advance(2),this.finishToken(t,o.SubstringOperator)):this.stream.peekChar(0)===d&&this.stream.peekChar(1)===f?(this.stream.advance(2),this.finishToken(t,o.PrefixOperator)):this.stream.peekChar(0)===b&&this.stream.peekChar(1)===f?(this.stream.advance(2),this.finishToken(t,o.SuffixOperator)):(this.stream.nextChar(),this.finishToken(t,o.Delim))},t.prototype._matchWordAnyCase=function(r){var i=0;return this.stream.advanceWhileChar(function(t){var e=r[i]===t||r[i+1]===t;return e&&(i+=2),e}),i===r.length||(this.stream.goBack(i/2),!1)},t.prototype.trivia=function(){for(;;){var t=this.stream.pos();if(this._whitespace()){if(!this.ignoreWhitespace)return this.finishToken(t,o.Whitespace)}else{if(!this.comment())return null;if(!this.ignoreComment)return this.finishToken(t,o.Comment)}}},t.prototype.comment=function(){if(this.stream.advanceIfChars([D,A])){var e=!1,r=!1;return this.stream.advanceWhileChar(function(t){return r&&t===D?!(e=!0):(r=t===A,!0)}),e&&this.stream.advance(1),!0}return!1},t.prototype._number=function(){var t,e=0;return this.stream.peekChar()===z&&(e=1),t=this.stream.peekChar(e),p<=t&&t<=C&&(this.stream.advance(e+1),this.stream.advanceWhileChar(function(t){return p<=t&&t<=C||0===e&&t===z}),!0)},t.prototype._newline=function(t){var e=this.stream.peekChar();switch(e){case E:case O:case I:return this.stream.advance(1),t.push(String.fromCharCode(e)),e===E&&this.stream.advanceIfChar(I)&&t.push("\n"),!0}return!1},t.prototype._escape=function(t,e){var r=this.stream.peekChar();if(r===B){this.stream.advance(1),r=this.stream.peekChar();for(var i=0;i<6&&(p<=r&&r<=C||s<=r&&r<=a||h<=r&&r<=c);)this.stream.advance(1),r=this.stream.peekChar(),i++;if(0<i){try{var n=parseInt(this.stream.substring(this.stream.pos()-i),16);n&&t.push(String.fromCharCode(n))}catch(t){}return r===P||r===w?this.stream.advance(1):this._newline([]),!0}if(r!==E&&r!==O&&r!==I)return this.stream.advance(1),t.push(String.fromCharCode(r)),!0;if(e)return this._newline(t)}return!1},t.prototype._stringChar=function(t,e){var r=this.stream.peekChar();return 0!==r&&r!==t&&r!==B&&r!==E&&r!==O&&r!==I&&(this.stream.advance(1),e.push(String.fromCharCode(r)),!0)},t.prototype._string=function(t){if(this.stream.peekChar()===q||this.stream.peekChar()===R){var e=this.stream.nextChar();for(t.push(String.fromCharCode(e));this._stringChar(e,t)||this._escape(t,!0););return this.stream.peekChar()===e?(this.stream.nextChar(),t.push(String.fromCharCode(e)),o.String):o.BadString}return null},t.prototype._unquotedChar=function(t){var e=this.stream.peekChar();return 0!==e&&e!==B&&e!==q&&e!==R&&e!==y&&e!==S&&e!==P&&e!==w&&e!==I&&e!==O&&e!==E&&(this.stream.advance(1),t.push(String.fromCharCode(e)),!0)},t.prototype._unquotedString=function(t){for(var e=!1;this._unquotedChar(t)||this._escape(t);)e=!0;return e},t.prototype._whitespace=function(){return 0<this.stream.advanceWhileChar(function(t){return t===P||t===w||t===I||t===O||t===E})},t.prototype._name=function(t){for(var e=!1;this._identChar(t)||this._escape(t);)e=!0;return e},t.prototype.ident=function(t){var e=this.stream.pos();if(this._minus(t)&&this._minus(t)){if(this._identFirstChar(t)||this._escape(t)){for(;this._identChar(t)||this._escape(t););return!0}}else if(this._identFirstChar(t)||this._escape(t)){for(;this._identChar(t)||this._escape(t););return!0}return this.stream.goBackTo(e),!1},t.prototype._identFirstChar=function(t){var e=this.stream.peekChar();return(e===k||s<=e&&e<=n||h<=e&&e<=u||128<=e&&e<=65535)&&(this.stream.advance(1),t.push(String.fromCharCode(e)),!0)},t.prototype._minus=function(t){var e=this.stream.peekChar();return e===g&&(this.stream.advance(1),t.push(String.fromCharCode(e)),!0)},t.prototype._identChar=function(t){var e=this.stream.peekChar();return(e===k||e===g||s<=e&&e<=n||h<=e&&e<=u||p<=e&&e<=C||128<=e&&e<=65535)&&(this.stream.advance(1),t.push(String.fromCharCode(e)),!0)},t}();e.Scanner=Z});