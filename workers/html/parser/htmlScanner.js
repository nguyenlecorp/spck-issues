!function(t){if("object"==typeof module&&"object"==typeof module.exports){var e=t(require,exports);void 0!==e&&(module.exports=e)}else"function"==typeof define&&define.amd&&define(["require","exports","vscode-nls"],t)}(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l,n,T=t("vscode-nls").loadMessageBundle();(n=l=e.TokenType||(e.TokenType={}))[n.StartCommentTag=0]="StartCommentTag",n[n.Comment=1]="Comment",n[n.EndCommentTag=2]="EndCommentTag",n[n.StartTagOpen=3]="StartTagOpen",n[n.StartTagClose=4]="StartTagClose",n[n.StartTagSelfClose=5]="StartTagSelfClose",n[n.StartTag=6]="StartTag",n[n.EndTagOpen=7]="EndTagOpen",n[n.EndTagClose=8]="EndTagClose",n[n.EndTag=9]="EndTag",n[n.DelimiterAssign=10]="DelimiterAssign",n[n.AttributeName=11]="AttributeName",n[n.AttributeValue=12]="AttributeValue",n[n.StartDoctypeTag=13]="StartDoctypeTag",n[n.Doctype=14]="Doctype",n[n.EndDoctypeTag=15]="EndDoctypeTag",n[n.Content=16]="Content",n[n.Whitespace=17]="Whitespace",n[n.Unknown=18]="Unknown",n[n.Script=19]="Script",n[n.Styles=20]="Styles",n[n.EOS=21]="EOS";var v,i,a=function(){function t(t,e){this.source=t,this.len=t.length,this.position=e}return t.prototype.eos=function(){return this.len<=this.position},t.prototype.getSource=function(){return this.source},t.prototype.pos=function(){return this.position},t.prototype.goBackTo=function(t){this.position=t},t.prototype.goBack=function(t){this.position-=t},t.prototype.advance=function(t){this.position+=t},t.prototype.goToEnd=function(){this.position=this.source.length},t.prototype.nextChar=function(){return this.source.charCodeAt(this.position++)||0},t.prototype.peekChar=function(t){return void 0===t&&(t=0),this.source.charCodeAt(this.position+t)||0},t.prototype.advanceIfChar=function(t){return t===this.source.charCodeAt(this.position)&&(this.position++,!0)},t.prototype.advanceIfChars=function(t){var e;if(this.position+t.length>this.source.length)return!1;for(e=0;e<t.length;e++)if(this.source.charCodeAt(this.position+e)!==t[e])return!1;return this.advance(e),!0},t.prototype.advanceIfRegExp=function(t){var e=this.source.substr(this.position).match(t);return e?(this.position=this.position+e.index+e[0].length,e[0]):""},t.prototype.advanceUntilRegExp=function(t){var e=this.source.substr(this.position).match(t);return e?(this.position=this.position+e.index,e[0]):(this.goToEnd(),"")},t.prototype.advanceUntilChar=function(t){for(;this.position<this.source.length;){if(this.source.charCodeAt(this.position)===t)return!0;this.advance(1)}return!1},t.prototype.advanceUntilChars=function(t){for(;this.position+t.length<=this.source.length;){for(var e=0;e<t.length&&this.source.charCodeAt(this.position+e)===t[e];e++);if(e===t.length)return!0;this.advance(1)}return this.goToEnd(),!1},t.prototype.skipWhitespace=function(){return 0<this.advanceWhileChar(function(t){return t===c||t===h||t===r||t===s||t===o})},t.prototype.advanceWhileChar=function(t){for(var e=this.position;this.position<this.len&&t(this.source.charCodeAt(this.position));)this.position++;return this.position-e},t}(),W="!".charCodeAt(0),S="-".charCodeAt(0),m="<".charCodeAt(0),y=">".charCodeAt(0),A="/".charCodeAt(0),E="=".charCodeAt(0),x='"'.charCodeAt(0),k="'".charCodeAt(0),r="\n".charCodeAt(0),o="\r".charCodeAt(0),s="\f".charCodeAt(0),c=" ".charCodeAt(0),h="\t".charCodeAt(0);(i=v=e.ScannerState||(e.ScannerState={}))[i.WithinContent=0]="WithinContent",i[i.AfterOpeningStartTag=1]="AfterOpeningStartTag",i[i.AfterOpeningEndTag=2]="AfterOpeningEndTag",i[i.WithinDoctype=3]="WithinDoctype",i[i.WithinTag=4]="WithinTag",i[i.WithinEndTag=5]="WithinEndTag",i[i.WithinComment=6]="WithinComment",i[i.WithinScriptContent=7]="WithinScriptContent",i[i.WithinStyleContent=8]="WithinStyleContent",i[i.AfterAttributeName=9]="AfterAttributeName",i[i.BeforeAttributeValue=10]="BeforeAttributeValue";var b={"text/x-handlebars-template":!0};e.createScanner=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=v.WithinContent);var i,c,h,p,u,d=new a(t,e),g=n,r=0,o=l.Unknown;function f(){return d.advanceIfRegExp(/^[_:\w][_:\w-.\d]*/).toLowerCase()}function C(t,e,n){return r=t,i=n,o=e}return{scan:function(){var t=d.pos(),e=g,n=function t(){var e,n=d.pos();if(d.eos())return C(n,l.EOS);switch(g){case v.WithinComment:return d.advanceIfChars([S,S,y])?(g=v.WithinContent,C(n,l.EndCommentTag)):(d.advanceUntilChars([S,S,y]),C(n,l.Comment));case v.WithinDoctype:return d.advanceIfChar(y)?(g=v.WithinContent,C(n,l.EndDoctypeTag)):(d.advanceUntilChar(y),C(n,l.Doctype));case v.WithinContent:if(d.advanceIfChar(m)){if(!d.eos()&&d.peekChar()===W){if(d.advanceIfChars([W,S,S]))return g=v.WithinComment,C(n,l.StartCommentTag);if(d.advanceIfRegExp(/^!doctype/i))return g=v.WithinDoctype,C(n,l.StartDoctypeTag)}return d.advanceIfChar(A)?(g=v.AfterOpeningEndTag,C(n,l.EndTagOpen)):(g=v.AfterOpeningStartTag,C(n,l.StartTagOpen))}return d.advanceUntilChar(m),C(n,l.Content);case v.AfterOpeningEndTag:var i=f();return 0<i.length?(g=v.WithinEndTag,C(n,l.EndTag)):d.skipWhitespace()?C(n,l.Whitespace,T("error.unexpectedWhitespace","Tag name must directly follow the open bracket.")):(g=v.WithinEndTag,d.advanceUntilChar(y),n<d.pos()?C(n,l.Unknown,T("error.endTagNameExpected","End tag name expected.")):t());case v.WithinEndTag:if(d.skipWhitespace())return C(n,l.Whitespace);if(d.advanceIfChar(y))return g=v.WithinContent,C(n,l.EndTagClose);e=T("error.tagNameExpected","Closing bracket expected.");break;case v.AfterOpeningStartTag:return h=f(),p=u=void 0,0<h.length?(c=!1,g=v.WithinTag,C(n,l.StartTag)):d.skipWhitespace()?C(n,l.Whitespace,T("error.unexpectedWhitespace","Tag name must directly follow the open bracket.")):(g=v.WithinTag,d.advanceUntilChar(y),n<d.pos()?C(n,l.Unknown,T("error.startTagNameExpected","Start tag name expected.")):t());case v.WithinTag:return d.skipWhitespace()?(c=!0,C(n,l.Whitespace)):c&&0<(p=d.advanceIfRegExp(/^[^\s"'>/=\x00-\x0F\x7F\x80-\x9F]*/).toLowerCase()).length?(g=v.AfterAttributeName,c=!1,C(n,l.AttributeName)):d.advanceIfChars([A,y])?(g=v.WithinContent,C(n,l.StartTagSelfClose)):d.advanceIfChar(y)?(g="script"===h?u&&b[u]?v.WithinContent:v.WithinScriptContent:"style"===h?v.WithinStyleContent:v.WithinContent,C(n,l.StartTagClose)):(d.advance(1),C(n,l.Unknown,T("error.unexpectedCharacterInTag","Unexpected character in tag.")));case v.AfterAttributeName:return d.skipWhitespace()?(c=!0,C(n,l.Whitespace)):d.advanceIfChar(E)?(g=v.BeforeAttributeValue,C(n,l.DelimiterAssign)):(g=v.WithinTag,t());case v.BeforeAttributeValue:if(d.skipWhitespace())return C(n,l.Whitespace);var r=d.advanceIfRegExp(/^[^\s"'`=<>\/]+/);if(0<r.length)return"type"===p&&(u=r),g=v.WithinTag,c=!1,C(n,l.AttributeValue);var o=d.peekChar();return o===k||o===x?(d.advance(1),d.advanceUntilChar(o)&&d.advance(1),"type"===p&&(u=d.getSource().substring(n+1,d.pos()-1)),g=v.WithinTag,c=!1,C(n,l.AttributeValue)):(g=v.WithinTag,c=!1,t());case v.WithinScriptContent:for(var a=1;!d.eos();){var s=d.advanceIfRegExp(/<!--|-->|<\/?script\s*\/?>?/i);if(0===s.length)return d.goToEnd(),C(n,l.Script);if("\x3c!--"===s)1===a&&(a=2);else if("--\x3e"===s)a=1;else if("/"!==s[1])2===a&&(a=3);else{if(3!==a){d.goBack(s.length);break}a=2}}return g=v.WithinContent,n<d.pos()?C(n,l.Script):t();case v.WithinStyleContent:return d.advanceUntilRegExp(/<\/style/i),g=v.WithinContent,n<d.pos()?C(n,l.Styles):t()}return d.advance(1),g=v.WithinContent,C(n,l.Unknown,e)}();return n!==l.EOS&&t===d.pos()?(console.log("Scanner.scan has not advanced at offset "+t+", state before: "+e+" after: "+g),d.advance(1),C(t,l.Unknown)):n},getTokenType:function(){return o},getTokenOffset:function(){return r},getTokenLength:function(){return d.pos()-r},getTokenEnd:function(){return d.pos()},getTokenText:function(){return d.getSource().substring(r,d.pos())},getScannerState:function(){return g},getTokenError:function(){return i}}}});