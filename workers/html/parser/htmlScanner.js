!function(t){if("object"==typeof module&&"object"==typeof module.exports){var e=t(require,exports);void 0!==e&&(module.exports=e)}else"function"==typeof define&&define.amd&&define(["require","exports","vscode-nls"],t)}(function(t,e){/*---------------------------------------------------------------------------------------------
     *  Copyright (c) Microsoft Corporation. All rights reserved.
     *  Licensed under the MIT License. See License.txt in the project root for license information.
     *--------------------------------------------------------------------------------------------*/
"use strict";function n(t,e,n){function r(){return k.advanceIfRegExp(/^[_:\w][_:\w-.\d]*/).toLowerCase()}function l(){return k.advanceIfRegExp(/^[^\s"'>\/=\x00-\x0F\x7F\x80-\x9F]*/).toLowerCase()}function T(t,e,n){return U=e,O=t,S=n,e}function v(){var t=k.pos(),e=b,n=W();return n!==i.EOS&&t===k.pos()?(console.log("Scanner.scan has not advanced at offset "+t+", state before: "+e+" after: "+b),k.advance(1),T(t,i.Unknown)):n}function W(){var t=k.pos();if(k.eos())return T(t,i.EOS);var e;switch(b){case a.WithinComment:return k.advanceIfChars([h,h,u])?(b=a.WithinContent,T(t,i.EndCommentTag)):(k.advanceUntilChars([h,h,u]),T(t,i.Comment));case a.WithinDoctype:return k.advanceIfChar(u)?(b=a.WithinContent,T(t,i.EndDoctypeTag)):(k.advanceUntilChar(u),T(t,i.Doctype));case a.WithinContent:if(k.advanceIfChar(p)){if(!k.eos()&&k.peekChar()===c){if(k.advanceIfChars([c,h,h]))return b=a.WithinComment,T(t,i.StartCommentTag);if(k.advanceIfRegExp(/^!doctype/i))return b=a.WithinDoctype,T(t,i.StartDoctypeTag)}return k.advanceIfChar(d)?(b=a.AfterOpeningEndTag,T(t,i.EndTagOpen)):(b=a.AfterOpeningStartTag,T(t,i.StartTagOpen))}return k.advanceUntilChar(p),T(t,i.Content);case a.AfterOpeningEndTag:return r().length>0?(b=a.WithinEndTag,T(t,i.EndTag)):k.skipWhitespace()?T(t,i.Whitespace,o("error.unexpectedWhitespace","Tag name must directly follow the open bracket.")):(b=a.WithinEndTag,k.advanceUntilChar(u),t<k.pos()?T(t,i.Unknown,o("error.endTagNameExpected","End tag name expected.")):W());case a.WithinEndTag:if(k.skipWhitespace())return T(t,i.Whitespace);if(k.advanceIfChar(u))return b=a.WithinContent,T(t,i.EndTagClose);e=o("error.tagNameExpected","Closing bracket expected.");break;case a.AfterOpeningStartTag:return A=r(),(x=void 0,E=void 0,A.length>0)?(y=!1,b=a.WithinTag,T(t,i.StartTag)):k.skipWhitespace()?T(t,i.Whitespace,o("error.unexpectedWhitespace","Tag name must directly follow the open bracket.")):(b=a.WithinTag,k.advanceUntilChar(u),t<k.pos()?T(t,i.Unknown,o("error.startTagNameExpected","Start tag name expected.")):W());case a.WithinTag:return k.skipWhitespace()?(y=!0,T(t,i.Whitespace)):y&&(E=l(),E.length>0)?(b=a.AfterAttributeName,y=!1,T(t,i.AttributeName)):k.advanceIfChars([d,u])?(b=a.WithinContent,T(t,i.StartTagSelfClose)):k.advanceIfChar(u)?(b="script"===A?x&&m[x]?a.WithinContent:a.WithinScriptContent:"style"===A?a.WithinStyleContent:a.WithinContent,T(t,i.StartTagClose)):(k.advance(1),T(t,i.Unknown,o("error.unexpectedCharacterInTag","Unexpected character in tag.")));case a.AfterAttributeName:return k.skipWhitespace()?(y=!0,T(t,i.Whitespace)):k.advanceIfChar(g)?(b=a.BeforeAttributeValue,T(t,i.DelimiterAssign)):(b=a.WithinTag,W());case a.BeforeAttributeValue:if(k.skipWhitespace())return T(t,i.Whitespace);var n=k.advanceIfRegExp(/^[^\s"'`=<>\/]+/);if(n.length>0)return"type"===E&&(x=n),b=a.WithinTag,y=!1,T(t,i.AttributeValue);var s=k.peekChar();return s===C||s===f?(k.advance(1),k.advanceUntilChar(s)&&k.advance(1),"type"===E&&(x=k.getSource().substring(t+1,k.pos()-1)),b=a.WithinTag,y=!1,T(t,i.AttributeValue)):(b=a.WithinTag,y=!1,W());case a.WithinScriptContent:for(var v=1;!k.eos();){var S=k.advanceIfRegExp(/<!--|-->|<\/?script\s*\/?>?/i);if(0===S.length)return k.goToEnd(),T(t,i.Script);if("\x3c!--"===S)1===v&&(v=2);else if("--\x3e"===S)v=1;else if("/"!==S[1])2===v&&(v=3);else{if(3!==v){k.goBack(S.length);break}v=2}}return b=a.WithinContent,t<k.pos()?T(t,i.Script):W();case a.WithinStyleContent:return k.advanceUntilRegExp(/<\/style/i),b=a.WithinContent,t<k.pos()?T(t,i.Styles):W()}return k.advance(1),b=a.WithinContent,T(t,i.Unknown,e)}void 0===e&&(e=0),void 0===n&&(n=a.WithinContent);var S,y,A,E,x,k=new s(t,e),b=n,O=0,U=i.Unknown;return{scan:v,getTokenType:function(){return U},getTokenOffset:function(){return O},getTokenLength:function(){return k.pos()-O},getTokenEnd:function(){return k.pos()},getTokenText:function(){return k.getSource().substring(O,k.pos())},getScannerState:function(){return b},getTokenError:function(){return S}}}Object.defineProperty(e,"__esModule",{value:!0});var i,r=t("vscode-nls"),o=r.loadMessageBundle();!function(t){t[t.StartCommentTag=0]="StartCommentTag",t[t.Comment=1]="Comment",t[t.EndCommentTag=2]="EndCommentTag",t[t.StartTagOpen=3]="StartTagOpen",t[t.StartTagClose=4]="StartTagClose",t[t.StartTagSelfClose=5]="StartTagSelfClose",t[t.StartTag=6]="StartTag",t[t.EndTagOpen=7]="EndTagOpen",t[t.EndTagClose=8]="EndTagClose",t[t.EndTag=9]="EndTag",t[t.DelimiterAssign=10]="DelimiterAssign",t[t.AttributeName=11]="AttributeName",t[t.AttributeValue=12]="AttributeValue",t[t.StartDoctypeTag=13]="StartDoctypeTag",t[t.Doctype=14]="Doctype",t[t.EndDoctypeTag=15]="EndDoctypeTag",t[t.Content=16]="Content",t[t.Whitespace=17]="Whitespace",t[t.Unknown=18]="Unknown",t[t.Script=19]="Script",t[t.Styles=20]="Styles",t[t.EOS=21]="EOS"}(i=e.TokenType||(e.TokenType={}));var a,s=function(){function t(t,e){this.source=t,this.len=t.length,this.position=e}return t.prototype.eos=function(){return this.len<=this.position},t.prototype.getSource=function(){return this.source},t.prototype.pos=function(){return this.position},t.prototype.goBackTo=function(t){this.position=t},t.prototype.goBack=function(t){this.position-=t},t.prototype.advance=function(t){this.position+=t},t.prototype.goToEnd=function(){this.position=this.source.length},t.prototype.nextChar=function(){return this.source.charCodeAt(this.position++)||0},t.prototype.peekChar=function(t){return void 0===t&&(t=0),this.source.charCodeAt(this.position+t)||0},t.prototype.advanceIfChar=function(t){return t===this.source.charCodeAt(this.position)&&(this.position++,!0)},t.prototype.advanceIfChars=function(t){var e;if(this.position+t.length>this.source.length)return!1;for(e=0;e<t.length;e++)if(this.source.charCodeAt(this.position+e)!==t[e])return!1;return this.advance(e),!0},t.prototype.advanceIfRegExp=function(t){var e=this.source.substr(this.position),n=e.match(t);return n?(this.position=this.position+n.index+n[0].length,n[0]):""},t.prototype.advanceUntilRegExp=function(t){var e=this.source.substr(this.position),n=e.match(t);return n?(this.position=this.position+n.index,n[0]):(this.goToEnd(),"")},t.prototype.advanceUntilChar=function(t){for(;this.position<this.source.length;){if(this.source.charCodeAt(this.position)===t)return!0;this.advance(1)}return!1},t.prototype.advanceUntilChars=function(t){for(;this.position+t.length<=this.source.length;){for(var e=0;e<t.length&&this.source.charCodeAt(this.position+e)===t[e];e++);if(e===t.length)return!0;this.advance(1)}return this.goToEnd(),!1},t.prototype.skipWhitespace=function(){return this.advanceWhileChar(function(t){return t===W||t===S||t===l||t===v||t===T})>0},t.prototype.advanceWhileChar=function(t){for(var e=this.position;this.position<this.len&&t(this.source.charCodeAt(this.position));)this.position++;return this.position-e},t}(),c="!".charCodeAt(0),h="-".charCodeAt(0),p="<".charCodeAt(0),u=">".charCodeAt(0),d="/".charCodeAt(0),g="=".charCodeAt(0),f='"'.charCodeAt(0),C="'".charCodeAt(0),l="\n".charCodeAt(0),T="\r".charCodeAt(0),v="\f".charCodeAt(0),W=" ".charCodeAt(0),S="\t".charCodeAt(0);!function(t){t[t.WithinContent=0]="WithinContent",t[t.AfterOpeningStartTag=1]="AfterOpeningStartTag",t[t.AfterOpeningEndTag=2]="AfterOpeningEndTag",t[t.WithinDoctype=3]="WithinDoctype",t[t.WithinTag=4]="WithinTag",t[t.WithinEndTag=5]="WithinEndTag",t[t.WithinComment=6]="WithinComment",t[t.WithinScriptContent=7]="WithinScriptContent",t[t.WithinStyleContent=8]="WithinStyleContent",t[t.AfterAttributeName=9]="AfterAttributeName",t[t.BeforeAttributeValue=10]="BeforeAttributeValue"}(a=e.ScannerState||(e.ScannerState={}));var m={"text/x-handlebars-template":!0};e.createScanner=n});