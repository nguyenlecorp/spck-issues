!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports","../parser/htmlScanner","vscode-languageserver-types","./tagProviders"],e)}(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("../parser/htmlScanner"),d=e("vscode-languageserver-types"),g=e("./tagProviders");t.doHover=function(a,e,t){var o=a.offsetAt(e),n=t.findNodeAt(o);if(!n||!n.tag)return null;var l=g.allTagProviders.filter(function(e){return e.isApplicable(a.languageId)});function r(r,a,o){r=r.toLowerCase();for(var e=function(e){var n=null;if(e.collectTags(function(e,t){e===r&&(n={contents:[{language:"html",value:o?"<"+r+">":"</"+r+">"},d.MarkedString.fromPlainText(t)],range:a})}),n)return{value:n}},t=0,n=l;t<n.length;t++){var u=e(n[t]);if("object"==typeof u)return u.value}return null}function u(e,t){for(var n=s.createScanner(a.getText(),t),r=n.scan();r!==s.TokenType.EOS&&(n.getTokenEnd()<o||n.getTokenEnd()===o&&r!==e);)r=n.scan();return r===e&&o<=n.getTokenEnd()?{start:a.positionAt(n.getTokenOffset()),end:a.positionAt(n.getTokenEnd())}:null}if(n.endTagStart&&o>=n.endTagStart){var i=u(s.TokenType.EndTag,n.endTagStart);return i?r(n.tag,i,!1):null}var f=u(s.TokenType.StartTag,n.start);return f?r(n.tag,f,!0):null}});