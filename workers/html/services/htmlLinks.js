!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports","../parser/htmlScanner","vscode-languageserver-types","../utils/strings","vscode-uri"],e)}(function(e,t){"use strict";function r(e,t){var r=e[0];return r!==e[e.length-1]||"'"!==r&&'"'!==r||(e=e.substr(1,e.length-2)),"razor"===t&&"~"===e[0]&&(e=e.substr(1)),e}function n(e,t){if(!e.length)return!1;if("handlebars"===t&&/{{.*}}/.test(e))return!1;if("razor"===t&&/@/.test(e))return!1;try{return!!l.default.parse(e)}catch(e){return!1}}function s(e,t,r,n){return/^\s*javascript\:/i.test(t)||/^\s*\#/i.test(t)||/[\n\r]/.test(t)?null:(t=t.replace(/^\s*/g,""),/^https?:\/\//i.test(t)||/^file:\/\//i.test(t)?t:/^\/\//i.test(t)?(c.startsWith(e,"https://")?"https":"http")+":"+t.replace(/^\s*/g,""):r?r.resolveReference(t,n||e):t)}function a(e,t,a,u,c,l){var f=r(a,e.languageId);if(!n(f,e.languageId))return null;f.length<a.length&&(u++,c--);var g=s(e.uri,f,t,l);return g&&o(g)?{range:i.Range.create(e.positionAt(u),e.positionAt(c)),target:g}:null}function o(e){try{return l.default.parse(e),!0}catch(e){return!1}}Object.defineProperty(t,"__esModule",{value:!0});var u=e("../parser/htmlScanner"),i=e("vscode-languageserver-types"),c=e("../utils/strings"),l=e("vscode-uri");t.findDocumentLinks=function(e,t){for(var n=[],s=u.createScanner(e.getText(),0),o=s.scan(),i=!1,c=!1,l=void 0;o!==u.TokenType.EOS;){switch(o){case u.TokenType.StartTag:l||(c="base"===s.getTokenText().toLowerCase());break;case u.TokenType.AttributeName:var f=s.getTokenText().toLowerCase();i="src"===f||"href"===f;break;case u.TokenType.AttributeValue:if(i){var g=s.getTokenText();if(!c){var p=a(e,t,g,s.getTokenOffset(),s.getTokenEnd(),l);p&&n.push(p)}c&&void 0===l&&(l=r(g,e.languageId))&&t&&(l=t.resolveReference(l,e.uri)),c=!1,i=!1}}o=s.scan()}return n}});