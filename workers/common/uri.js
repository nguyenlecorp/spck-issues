!function(t){if("object"==typeof module&&"object"==typeof module.exports){var e=t(require,exports);void 0!==e&&(module.exports=e)}else"function"==typeof define&&define.amd&&define("vscode-uri",["require","exports"],t)}(function(t,e){"use strict";function r(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}function c(t){return encodeURIComponent(t).replace(/[!'()*]/g,r)}function m(t){return t.replace(/[#?]/,r)}Object.defineProperty(e,"__esModule",{value:!0});var a,i=function(){function _(){this._scheme=_._empty,this._authority=_._empty,this._path=_._empty,this._query=_._empty,this._fragment=_._empty,this._formatted=null,this._fsPath=null}return _.isUri=function(t){return t instanceof _||!!t&&("string"==typeof t.authority&&"string"==typeof t.fragment&&"string"==typeof t.path&&"string"==typeof t.query&&"string"==typeof t.scheme)},Object.defineProperty(_.prototype,"scheme",{get:function(){return this._scheme},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"authority",{get:function(){return this._authority},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"path",{get:function(){return this._path},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"query",{get:function(){return this._query},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"fragment",{get:function(){return this._fragment},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"fsPath",{get:function(){var t;this._fsPath||(t=this._authority&&this._path&&"file"===this.scheme?"//"+this._authority+this._path:_._driveLetterPath.test(this._path)?this._path[1].toLowerCase()+this._path.substr(2):this._path,a&&(t=t.replace(/\//g,"\\")),this._fsPath=t);return this._fsPath},enumerable:!0,configurable:!0}),_.prototype.with=function(t){if(!t)return this;var e=t.scheme,r=t.authority,a=t.path,i=t.query,n=t.fragment;if(void 0===e?e=this.scheme:null===e&&(e=""),void 0===r?r=this.authority:null===r&&(r=""),void 0===a?a=this.path:null===a&&(a=""),void 0===i?i=this.query:null===i&&(i=""),void 0===n?n=this.fragment:null===n&&(n=""),e===this.scheme&&r===this.authority&&a===this.path&&i===this.query&&n===this.fragment)return this;var s=new _;return s._scheme=e,s._authority=r,s._path=a,s._query=i,s._fragment=n,_._validate(s),s},_.parse=function(t){var e=new _,r=_._parseComponents(t);return e._scheme=r.scheme,e._authority=decodeURIComponent(r.authority),e._path=decodeURIComponent(r.path),e._query=decodeURIComponent(r.query),e._fragment=decodeURIComponent(r.fragment),_._validate(e),e},_.file=function(t){var e=new _;if(e._scheme="file",a&&(t=t.replace(/\\/g,_._slash)),t[0]===_._slash&&t[0]===t[1]){var r=t.indexOf(_._slash,2);-1===r?e._authority=t.substring(2):(e._authority=t.substring(2,r),e._path=t.substring(r))}else e._path=t;return e._path[0]!==_._slash&&(e._path=_._slash+e._path),_._validate(e),e},_._parseComponents=function(t){var e={scheme:_._empty,authority:_._empty,path:_._empty,query:_._empty,fragment:_._empty},r=_._regexp.exec(t);return r&&(e.scheme=r[2]||e.scheme,e.authority=r[4]||e.authority,e.path=r[5]||e.path,e.query=r[7]||e.query,e.fragment=r[9]||e.fragment),e},_.from=function(t){return(new _).with(t)},_._validate=function(t){if(t.scheme&&!_._schemePattern.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path)if(t.authority){if(!_._singleSlashStart.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(_._doubleSlashStart.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')},_.prototype.toString=function(t){return void 0===t&&(t=!1),t?_._asFormatted(this,!0):(this._formatted||(this._formatted=_._asFormatted(this,!1)),this._formatted)},_._asFormatted=function(t,e){var r=e?m:c,a=[],i=t.scheme,n=t.authority,s=t.path,h=t.query,o=t.fragment;(i&&a.push(i,":"),(n||"file"===i)&&a.push("//"),n)&&(-1===(f=(n=n.toLowerCase()).indexOf(":"))?a.push(r(n)):a.push(r(n.substr(0,f)),n.substr(f)));if(s){var u=_._upperCaseDrive.exec(s);u&&(s=u[1]?"/"+u[2].toLowerCase()+s.substr(3):u[2].toLowerCase()+s.substr(2));for(var p=0;;){var f;if(-1===(f=s.indexOf(_._slash,p))){a.push(r(s.substring(p)));break}a.push(r(s.substring(p,f)),_._slash),p=f+1}}return h&&a.push("?",r(h)),o&&a.push("#",r(o)),a.join(_._empty)},_.prototype.toJSON=function(){var t={fsPath:this.fsPath,external:this.toString(),$mid:1};return this.path&&(t.path=this.path),this.scheme&&(t.scheme=this.scheme),this.authority&&(t.authority=this.authority),this.query&&(t.query=this.query),this.fragment&&(t.fragment=this.fragment),t},_.revive=function(t){var e=new _;return e._scheme=t.scheme||_._empty,e._authority=t.authority||_._empty,e._path=t.path||_._empty,e._query=t.query||_._empty,e._fragment=t.fragment||_._empty,e._fsPath=t.fsPath,e._formatted=t.external,_._validate(e),e},_}();if(i._empty="",i._slash="/",i._regexp=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,i._driveLetterPath=/^\/[a-zA-z]:/,i._upperCaseDrive=/^(\/)?([A-Z]:)/,i._schemePattern=/^\w[\w\d+.-]*$/,i._singleSlashStart=/^\//,i._doubleSlashStart=/^\/\//,e.default=i,"object"==typeof process)a="win32"===process.platform;else if("object"==typeof navigator){var n=navigator.userAgent;a=0<=n.indexOf("Windows")}});