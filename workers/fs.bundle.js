function LFUCache(e,t){var r=0,n=1,i={},o={};function u(){var e={},u={};r=0,Object.keys(o).forEach(a=>{var s=o[a];s&&s/n>t&&(r++,e[a]=1,u[a]=i[a])}),i=u,o=e,n=1}Object.assign(this,{_cache:i,_hits:o,keys:function(){return Object.keys(i)},get:function(e){var t=++o[e]||void 0;return t&&(n=t>n?t:n)&&i[e]},set:function(t,n){return++r>e&&u(),o[t]=1,i[t]=n},del:function(e){delete i[e],delete o[e],r--},find:function(e){return Object.keys(i).find(t=>i[t]===e)},rename:function(e,t){i[t]=i[e],o[t]=o[e],delete i[e],delete o[e]},clear:function(){r&&(r=0,n=1,i={},o={})}})}!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).buffer=e()}((function(){return function e(t,r,n){function i(u,a){if(!r[u]){if(!t[u]){var s="function"==typeof require&&require;if(!a&&s)return s(u,!0);if(o)return o(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var c=r[u]={exports:{}};t[u][0].call(c.exports,(function(e){return i(t[u][1][e]||e)}),c,c.exports,e,t,r,n)}return r[u].exports}for(var o="function"==typeof require&&require,u=0;u<n.length;u++)i(n[u]);return i}({1:[function(e,t,r){(function(t){"use strict";var n=e("base64-js"),i=e("ieee754"),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=t,r.SlowBuffer=function(e){return+e!=e&&(e=0),t.alloc(+e)},r.INSPECT_MAX_BYTES=50;var u=2147483647;function a(e){if(e>u)throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=new Uint8Array(e);return Object.setPrototypeOf(r,t.prototype),r}function t(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return s(e,t,r)}function s(e,r,n){if("string"==typeof e)return function(e,r){if("string"==typeof r&&""!==r||(r="utf8"),!t.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var n=0|p(e,r),i=a(n),o=i.write(e,r);return o!==n&&(i=i.slice(0,o)),i}(e,r);if(ArrayBuffer.isView(e))return l(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(K(e,ArrayBuffer)||e&&K(e.buffer,ArrayBuffer))return function(e,r,n){if(r<0||e.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<r+(n||0))throw new RangeError('"length" is outside of buffer bounds');var i;return i=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),Object.setPrototypeOf(i,t.prototype),i}(e,r,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return t.from(i,r,n);var o=function(e){if(t.isBuffer(e)){var r=0|h(e.length),n=a(r);return 0===n.length?n:(e.copy(n,0,0,r),n)}return void 0!==e.length?"number"!=typeof e.length||L(e.length)?a(0):l(e):"Buffer"===e.type&&Array.isArray(e.data)?l(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return t.from(e[Symbol.toPrimitive]("string"),r,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function f(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return f(e),a(e<0?0:0|h(e))}function l(e){for(var t=e.length<0?0:0|h(e.length),r=a(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function h(e){if(e>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return 0|e}function p(e,r){if(t.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||K(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;for(var o=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return M(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(e).length;default:if(o)return i?-1:M(e).length;r=(""+r).toLowerCase(),o=!0}}function d(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,r,n,i,o){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),L(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof r&&(r=t.from(r,i)),t.isBuffer(r))return 0===r.length?-1:v(e,r,n,i,o);if("number"==typeof r)return r&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,r,n):Uint8Array.prototype.lastIndexOf.call(e,r,n):v(e,[r],n,i,o);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){var o,u=1,a=e.length,s=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;u=2,a/=2,s/=2,r/=2}function f(e,t){return 1===u?e[t]:e.readUInt16BE(t*u)}if(i){var c=-1;for(o=r;o<a;o++)if(f(e,o)===f(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===s)return c*u}else-1!==c&&(o-=o-c),c=-1}else for(r+s>a&&(r=a-s),o=r;o>=0;o--){for(var l=!0,h=0;h<s;h++)if(f(e,o+h)!==f(t,h)){l=!1;break}if(l)return o}return-1}function m(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;n>o/2&&(n=o/2);for(var u=0;u<n;++u){var a=parseInt(t.substr(2*u,2),16);if(L(a))return u;e[r+u]=a}return u}function g(e,t,r,n){return U(M(t,e.length-r),e,r,n)}function b(e,t,r,n){return U(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function w(e,t,r,n){return b(e,t,r,n)}function _(e,t,r,n){return U(F(t),e,r,n)}function E(e,t,r,n){return U(function(e,t){for(var r,n,i,o=[],u=0;u<e.length&&!((t-=2)<0);++u)n=(r=e.charCodeAt(u))>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function x(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function A(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,u,a,s,f=e[i],c=null,l=f>239?4:f>223?3:f>191?2:1;if(i+l<=r)switch(l){case 1:f<128&&(c=f);break;case 2:128==(192&(o=e[i+1]))&&(s=(31&f)<<6|63&o)>127&&(c=s);break;case 3:o=e[i+1],u=e[i+2],128==(192&o)&&128==(192&u)&&(s=(15&f)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(c=s);break;case 4:o=e[i+1],u=e[i+2],a=e[i+3],128==(192&o)&&128==(192&u)&&128==(192&a)&&(s=(15&f)<<18|(63&o)<<12|(63&u)<<6|63&a)>65535&&s<1114112&&(c=s)}null===c?(c=65533,l=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=l}return function(e){var t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=k));return r}(n)}r.kMaxLength=u,t.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),t.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(e,t,r){return s(e,t,r)},Object.setPrototypeOf(t.prototype,Uint8Array.prototype),Object.setPrototypeOf(t,Uint8Array),t.alloc=function(e,t,r){return function(e,t,r){return f(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},t.allocUnsafe=function(e){return c(e)},t.allocUnsafeSlow=function(e){return c(e)},t.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==t.prototype},t.compare=function(e,r){if(K(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),K(r,Uint8Array)&&(r=t.from(r,r.offset,r.byteLength)),!t.isBuffer(e)||!t.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;for(var n=e.length,i=r.length,o=0,u=Math.min(n,i);o<u;++o)if(e[o]!==r[o]){n=e[o],i=r[o];break}return n<i?-1:i<n?1:0},t.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var n;if(void 0===r)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=t.allocUnsafe(r),o=0;for(n=0;n<e.length;++n){var u=e[n];if(K(u,Uint8Array)&&(u=t.from(u)),!t.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},t.byteLength=p,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)d(this,t,t+1);return this},t.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)d(this,t,t+3),d(this,t+1,t+2);return this},t.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)d(this,t,t+7),d(this,t+1,t+6),d(this,t+2,t+5),d(this,t+3,t+4);return this},t.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,r);case"utf8":case"utf-8":return A(this,t,r);case"ascii":return B(this,t,r);case"latin1":case"binary":return S(this,t,r);case"base64":return x(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},o&&(t.prototype[o]=t.prototype.inspect),t.prototype.compare=function(e,r,n,i,o){if(K(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),!t.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),r<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(this===e)return 0;for(var u=(o>>>=0)-(i>>>=0),a=(n>>>=0)-(r>>>=0),s=Math.min(u,a),f=this.slice(i,o),c=e.slice(r,n),l=0;l<s;++l)if(f[l]!==c[l]){u=f[l],a=c[l];break}return u<a?-1:a<u?1:0},t.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},t.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},t.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},t.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return m(this,e,t,r);case"utf8":case"utf-8":return g(this,e,t,r);case"ascii":return b(this,e,t,r);case"latin1":case"binary":return w(this,e,t,r);case"base64":return _(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function B(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function S(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function O(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=N[e[o]];return i}function P(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function I(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function C(e,r,n,i,o,u){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>o||r<u)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function T(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function j(e,t,r,n,o){return t=+t,r>>>=0,o||T(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function R(e,t,r,n,o){return t=+t,r>>>=0,o||T(e,0,r,8),i.write(e,t,r,n,52,8),r+8}t.prototype.slice=function(e,r){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<e&&(r=e);var i=this.subarray(e,r);return Object.setPrototypeOf(i,t.prototype),i},t.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},t.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},t.prototype.readUInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),this[e]},t.prototype.readUInt16LE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},t.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},t.prototype.readInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},t.prototype.readInt16LE=function(e,t){e>>>=0,t||I(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt16BE=function(e,t){e>>>=0,t||I(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function(e,t){return e>>>=0,t||I(e,4,this.length),i.read(this,e,!0,23,4)},t.prototype.readFloatBE=function(e,t){return e>>>=0,t||I(e,4,this.length),i.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function(e,t){return e>>>=0,t||I(e,8,this.length),i.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function(e,t){return e>>>=0,t||I(e,8,this.length),i.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||C(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},t.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||C(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},t.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,255,0),this[t]=255&e,t+1},t.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},t.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);C(this,e,t,r,i-1,-i)}var o=0,u=1,a=0;for(this[t]=255&e;++o<r&&(u*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/u>>0)-a&255;return t+r},t.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);C(this,e,t,r,i-1,-i)}var o=r-1,u=1,a=0;for(this[t+o]=255&e;--o>=0&&(u*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/u>>0)-a&255;return t+r},t.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},t.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},t.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeFloatLE=function(e,t,r){return j(this,e,t,!0,r)},t.prototype.writeFloatBE=function(e,t,r){return j(this,e,t,!1,r)},t.prototype.writeDoubleLE=function(e,t,r){return R(this,e,t,!0,r)},t.prototype.writeDoubleBE=function(e,t,r){return R(this,e,t,!1,r)},t.prototype.copy=function(e,r,n,i){if(!t.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var o=i-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(r,n,i);else if(this===e&&n<r&&r<i)for(var u=o-1;u>=0;--u)e[u+r]=this[u+n];else Uint8Array.prototype.set.call(e,this.subarray(n,i),r);return o},t.prototype.fill=function(e,r,n,i){if("string"==typeof e){if("string"==typeof r?(i=r,r=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!t.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){var o=e.charCodeAt(0);("utf8"===i&&o<128||"latin1"===i)&&(e=o)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;var u;if(r>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(u=r;u<n;++u)this[u]=e;else{var a=t.isBuffer(e)?e:t.from(e,i),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(u=0;u<n-r;++u)this[u+r]=a[u%s]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function M(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],u=0;u<n;++u){if((r=e.charCodeAt(u))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function F(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(D,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function U(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function K(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function L(e){return e!=e}var N=function(){for(var e=new Array(256),t=0;t<16;++t)for(var r=16*t,n=0;n<16;++n)e[r+n]="0123456789abcdef"[t]+"0123456789abcdef"[n];return e}()}).call(this,e("buffer").Buffer)},{"base64-js":2,buffer:5,ieee754:3}],2:[function(e,t,r){"use strict";r.byteLength=function(e){var t=f(e),r=t[0],n=t[1];return 3*(r+n)/4-n},r.toByteArray=function(e){var t,r,n=f(e),u=n[0],a=n[1],s=new o(function(e,t,r){return 3*(t+r)/4-r}(0,u,a)),c=0,l=a>0?u-4:u;for(r=0;r<l;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],s[c++]=t>>16&255,s[c++]=t>>8&255,s[c++]=255&t;return 2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,s[c++]=255&t),1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,s[c++]=t>>8&255,s[c++]=255&t),s},r.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],u=0,a=r-i;u<a;u+=16383)o.push(c(e,u,u+16383>a?a:u+16383));return 1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=u.length;a<s;++a)n[a]=u[a],i[u.charCodeAt(a)]=a;function f(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,r){for(var i,o,u=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),u.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return u.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],3:[function(e,t,r){r.read=function(e,t,r,n,i){var o,u,a=8*i-n-1,s=(1<<a)-1,f=s>>1,c=-7,l=r?i-1:0,h=r?-1:1,p=e[t+l];for(l+=h,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=256*o+e[t+l],l+=h,c-=8);for(u=o&(1<<-c)-1,o>>=-c,c+=n;c>0;u=256*u+e[t+l],l+=h,c-=8);if(0===o)o=1-f;else{if(o===s)return u?NaN:1/0*(p?-1:1);u+=Math.pow(2,n),o-=f}return(p?-1:1)*u*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var u,a,s,f=8*o-i-1,c=(1<<f)-1,l=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,u=c):(u=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-u))<1&&(u--,s*=2),(t+=u+l>=1?h/s:h*Math.pow(2,1-l))*s>=2&&(u++,s/=2),u+l>=c?(a=0,u=c):u+l>=1?(a=(t*s-1)*Math.pow(2,i),u+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),u=0));i>=8;e[r+p]=255&a,p+=d,a/=256,i-=8);for(u=u<<i|a,f+=i;f>0;e[r+p]=255&u,p+=d,u/=256,f-=8);e[r+p-d]|=128*y}},{}],4:[function(e,t,r){arguments[4][2][0].apply(r,arguments)},{dup:2}],5:[function(e,t,r){(function(t){"use strict";var n=e("base64-js"),i=e("ieee754");r.Buffer=t,r.SlowBuffer=function(e){return+e!=e&&(e=0),t.alloc(+e)},r.INSPECT_MAX_BYTES=50;var o=2147483647;function u(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=new Uint8Array(e);return r.__proto__=t.prototype,r}function t(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return a(e,t,r)}function a(e,r,n){if("string"==typeof e)return function(e,r){if("string"==typeof r&&""!==r||(r="utf8"),!t.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var n=0|h(e,r),i=u(n),o=i.write(e,r);return o!==n&&(i=i.slice(0,o)),i}(e,r);if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(K(e,ArrayBuffer)||e&&K(e.buffer,ArrayBuffer))return function(e,r,n){if(r<0||e.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<r+(n||0))throw new RangeError('"length" is outside of buffer bounds');var i;return(i=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n)).__proto__=t.prototype,i}(e,r,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return t.from(i,r,n);var o=function(e){if(t.isBuffer(e)){var r=0|l(e.length),n=u(r);return 0===n.length?n:(e.copy(n,0,0,r),n)}return void 0!==e.length?"number"!=typeof e.length||L(e.length)?u(0):c(e):"Buffer"===e.type&&Array.isArray(e.data)?c(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return t.from(e[Symbol.toPrimitive]("string"),r,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function f(e){return s(e),u(e<0?0:0|l(e))}function c(e){for(var t=e.length<0?0:0|l(e.length),r=u(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function l(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function h(e,r){if(t.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||K(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;for(var o=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return M(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(e).length;default:if(o)return i?-1:M(e).length;r=(""+r).toLowerCase(),o=!0}}function p(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function d(e,r,n,i,o){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),L(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof r&&(r=t.from(r,i)),t.isBuffer(r))return 0===r.length?-1:y(e,r,n,i,o);if("number"==typeof r)return r&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,r,n):Uint8Array.prototype.lastIndexOf.call(e,r,n):y(e,[r],n,i,o);throw new TypeError("val must be string, number or Buffer")}function y(e,t,r,n,i){var o,u=1,a=e.length,s=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;u=2,a/=2,s/=2,r/=2}function f(e,t){return 1===u?e[t]:e.readUInt16BE(t*u)}if(i){var c=-1;for(o=r;o<a;o++)if(f(e,o)===f(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===s)return c*u}else-1!==c&&(o-=o-c),c=-1}else for(r+s>a&&(r=a-s),o=r;o>=0;o--){for(var l=!0,h=0;h<s;h++)if(f(e,o+h)!==f(t,h)){l=!1;break}if(l)return o}return-1}function v(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;n>o/2&&(n=o/2);for(var u=0;u<n;++u){var a=parseInt(t.substr(2*u,2),16);if(L(a))return u;e[r+u]=a}return u}function m(e,t,r,n){return U(M(t,e.length-r),e,r,n)}function g(e,t,r,n){return U(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function b(e,t,r,n){return g(e,t,r,n)}function w(e,t,r,n){return U(F(t),e,r,n)}function _(e,t,r,n){return U(function(e,t){for(var r,n,i,o=[],u=0;u<e.length&&!((t-=2)<0);++u)n=(r=e.charCodeAt(u))>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function E(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function x(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,u,a,s,f=e[i],c=null,l=f>239?4:f>223?3:f>191?2:1;if(i+l<=r)switch(l){case 1:f<128&&(c=f);break;case 2:128==(192&(o=e[i+1]))&&(s=(31&f)<<6|63&o)>127&&(c=s);break;case 3:o=e[i+1],u=e[i+2],128==(192&o)&&128==(192&u)&&(s=(15&f)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(c=s);break;case 4:o=e[i+1],u=e[i+2],a=e[i+3],128==(192&o)&&128==(192&u)&&128==(192&a)&&(s=(15&f)<<18|(63&o)<<12|(63&u)<<6|63&a)>65535&&s<1114112&&(c=s)}null===c?(c=65533,l=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=l}return function(e){var t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=A));return r}(n)}r.kMaxLength=o,t.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),t.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(e,t,r){return a(e,t,r)},t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,t.alloc=function(e,t,r){return function(e,t,r){return s(e),e<=0?u(e):void 0!==t?"string"==typeof r?u(e).fill(t,r):u(e).fill(t):u(e)}(e,t,r)},t.allocUnsafe=function(e){return f(e)},t.allocUnsafeSlow=function(e){return f(e)},t.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==t.prototype},t.compare=function(e,r){if(K(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),K(r,Uint8Array)&&(r=t.from(r,r.offset,r.byteLength)),!t.isBuffer(e)||!t.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;for(var n=e.length,i=r.length,o=0,u=Math.min(n,i);o<u;++o)if(e[o]!==r[o]){n=e[o],i=r[o];break}return n<i?-1:i<n?1:0},t.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var n;if(void 0===r)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=t.allocUnsafe(r),o=0;for(n=0;n<e.length;++n){var u=e[n];if(K(u,Uint8Array)&&(u=t.from(u)),!t.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},t.byteLength=h,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},t.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},t.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},t.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?x(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return S(this,t,r);case"utf8":case"utf-8":return x(this,t,r);case"ascii":return k(this,t,r);case"latin1":case"binary":return B(this,t,r);case"base64":return E(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},t.prototype.compare=function(e,r,n,i,o){if(K(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),!t.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),r<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(this===e)return 0;for(var u=(o>>>=0)-(i>>>=0),a=(n>>>=0)-(r>>>=0),s=Math.min(u,a),f=this.slice(i,o),c=e.slice(r,n),l=0;l<s;++l)if(f[l]!==c[l]){u=f[l],a=c[l];break}return u<a?-1:a<u?1:0},t.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},t.prototype.indexOf=function(e,t,r){return d(this,e,t,r,!0)},t.prototype.lastIndexOf=function(e,t,r){return d(this,e,t,r,!1)},t.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return v(this,e,t,r);case"utf8":case"utf-8":return m(this,e,t,r);case"ascii":return g(this,e,t,r);case"latin1":case"binary":return b(this,e,t,r);case"base64":return w(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function k(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function B(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function S(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=D(e[o]);return i}function O(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function P(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function I(e,r,n,i,o,u){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>o||r<u)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function C(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function T(e,t,r,n,o){return t=+t,r>>>=0,o||C(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function j(e,t,r,n,o){return t=+t,r>>>=0,o||C(e,0,r,8),i.write(e,t,r,n,52,8),r+8}t.prototype.slice=function(e,r){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<e&&(r=e);var i=this.subarray(e,r);return i.__proto__=t.prototype,i},t.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},t.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},t.prototype.readUInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),this[e]},t.prototype.readUInt16LE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},t.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},t.prototype.readInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},t.prototype.readInt16LE=function(e,t){e>>>=0,t||P(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt16BE=function(e,t){e>>>=0,t||P(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function(e,t){return e>>>=0,t||P(e,4,this.length),i.read(this,e,!0,23,4)},t.prototype.readFloatBE=function(e,t){return e>>>=0,t||P(e,4,this.length),i.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function(e,t){return e>>>=0,t||P(e,8,this.length),i.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function(e,t){return e>>>=0,t||P(e,8,this.length),i.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||I(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},t.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||I(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},t.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,1,255,0),this[t]=255&e,t+1},t.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},t.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);I(this,e,t,r,i-1,-i)}var o=0,u=1,a=0;for(this[t]=255&e;++o<r&&(u*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/u>>0)-a&255;return t+r},t.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);I(this,e,t,r,i-1,-i)}var o=r-1,u=1,a=0;for(this[t+o]=255&e;--o>=0&&(u*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/u>>0)-a&255;return t+r},t.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},t.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},t.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeFloatLE=function(e,t,r){return T(this,e,t,!0,r)},t.prototype.writeFloatBE=function(e,t,r){return T(this,e,t,!1,r)},t.prototype.writeDoubleLE=function(e,t,r){return j(this,e,t,!0,r)},t.prototype.writeDoubleBE=function(e,t,r){return j(this,e,t,!1,r)},t.prototype.copy=function(e,r,n,i){if(!t.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var o=i-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(r,n,i);else if(this===e&&n<r&&r<i)for(var u=o-1;u>=0;--u)e[u+r]=this[u+n];else Uint8Array.prototype.set.call(e,this.subarray(n,i),r);return o},t.prototype.fill=function(e,r,n,i){if("string"==typeof e){if("string"==typeof r?(i=r,r=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!t.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){var o=e.charCodeAt(0);("utf8"===i&&o<128||"latin1"===i)&&(e=o)}}else"number"==typeof e&&(e&=255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;var u;if(r>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(u=r;u<n;++u)this[u]=e;else{var a=t.isBuffer(e)?e:t.from(e,i),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(u=0;u<n-r;++u)this[u+r]=a[u%s]}return this};var R=/[^+\/0-9A-Za-z-_]/g;function D(e){return e<16?"0"+e.toString(16):e.toString(16)}function M(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],u=0;u<n;++u){if((r=e.charCodeAt(u))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function F(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(R,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function U(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function K(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function L(e){return e!=e}}).call(this,e("buffer").Buffer)},{"base64-js":4,buffer:5,ieee754:6}],6:[function(e,t,r){arguments[4][3][0].apply(r,arguments)},{dup:3}]},{},[1])(1)})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Dexie=t()}(this,(function(){"use strict";var e=function(){return(e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},t=Object.keys,r=Array.isArray,n="undefined"!=typeof self?self:"undefined"!=typeof window?window:global;function i(e,r){return"object"!=typeof r||t(r).forEach((function(t){e[t]=r[t]})),e}"undefined"==typeof Promise||n.Promise||(n.Promise=Promise);var o=Object.getPrototypeOf,u={}.hasOwnProperty;function a(e,t){return u.call(e,t)}function s(e,r){"function"==typeof r&&(r=r(o(e))),t(r).forEach((function(t){c(e,t,r[t])}))}var f=Object.defineProperty;function c(e,t,r,n){f(e,t,i(r&&a(r,"get")&&"function"==typeof r.get?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function l(e){return{from:function(t){return e.prototype=Object.create(t.prototype),c(e.prototype,"constructor",e),{extend:s.bind(null,e.prototype)}}}}var h=Object.getOwnPropertyDescriptor,p=[].slice;function d(e,t,r){return p.call(e,t,r)}function y(e,t){return t(e)}function v(e){if(!e)throw new Error("Assertion Failed")}function m(e){n.setImmediate?setImmediate(e):setTimeout(e,0)}function g(e,t){return e.reduce((function(e,r,n){var i=t(r,n);return i&&(e[i[0]]=i[1]),e}),{})}function b(e,t){if(a(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var r=[],n=0,i=t.length;n<i;++n){var o=b(e,t[n]);r.push(o)}return r}var u=t.indexOf(".");if(-1!==u){var s=e[t.substr(0,u)];return void 0===s?void 0:b(s,t.substr(u+1))}}function w(e,t,n){if(e&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){v("string"!=typeof n&&"length"in n);for(var i=0,o=t.length;i<o;++i)w(e,t[i],n[i])}else{var u=t.indexOf(".");if(-1!==u){var a=t.substr(0,u),s=t.substr(u+1);if(""===s)void 0===n?r(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var f=e[a];f||(f=e[a]={}),w(f,s,n)}}else void 0===n?r(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function _(e){var t={};for(var r in e)a(e,r)&&(t[r]=e[r]);return t}var E=[].concat;function x(e){return E.apply([],e)}var A="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(x([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return n[e]})),k=A.map((function(e){return n[e]})),B=g(A,(function(e){return[e,!0]}));function S(e){if(!e||"object"!=typeof e)return e;var t;if(r(e)){t=[];for(var n=0,i=e.length;n<i;++n)t.push(S(e[n]))}else if(0<=k.indexOf(e.constructor))t=e;else for(var o in t=e.constructor?Object.create(e.constructor.prototype):{},e)a(e,o)&&(t[o]=S(e[o]));return t}var O={}.toString;function P(e){return O.call(e).slice(8,-1)}var I=function(e,t){return"Array"===t?""+e.map((function(e){return I(e,P(e))})):"ArrayBuffer"===t?""+new Uint8Array(e):"Date"===t?e.getTime():ArrayBuffer.isView(e)?""+new Uint8Array(e.buffer):e};function C(e,r,n,i){return n=n||{},i=i||"",t(e).forEach((function(t){if(a(r,t)){var o=e[t],u=r[t];if("object"==typeof o&&"object"==typeof u&&o&&u){var s=P(o),f=P(u);s===f?B[s]?I(o,s)!==I(u,f)&&(n[i+t]=r[t]):C(o,u,n,i+t+"."):n[i+t]=r[t]}else o!==u&&(n[i+t]=r[t])}else n[i+t]=void 0})),t(r).forEach((function(t){a(e,t)||(n[i+t]=r[t])})),n}var T="undefined"!=typeof Symbol&&Symbol.iterator,j=T?function(e){var t;return null!=e&&(t=e[T])&&t.apply(e)}:function(){return null},R={};function D(e){var t,n,i,o;if(1===arguments.length){if(r(e))return e.slice();if(this===R&&"string"==typeof e)return[e];if(o=j(e)){for(n=[];!(i=o.next()).done;)n.push(i.value);return n}if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var M="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function F(e,t){M=e,U=t}var U=function(){return!0},K=!new Error("").stack;function L(){if(K)try{throw new Error}catch(e){return e}return new Error}function N(e,t){var r=e.stack;return r?(t=t||0,0===r.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),r.split("\n").slice(t).filter(U).map((function(e){return"\n"+e})).join("")):""}var q=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],z=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(q),W={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function Y(e,t){this._e=L(),this.name=e,this.message=t}function V(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,r){return r.indexOf(e)===t})).join("\n")}function $(e,t,r,n){this._e=L(),this.failures=t,this.failedKeys=n,this.successCount=r,this.message=V(e,t)}function G(e,t){this._e=L(),this.name="BulkError",this.failures=t,this.message=V(e,t)}l(Y).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+N(this._e,2))}},toString:function(){return this.name+": "+this.message}}),l($).from(Y),l(G).from(Y);var X=z.reduce((function(e,t){return e[t]=t+"Error",e}),{}),H=Y,J=z.reduce((function(e,t){var r=t+"Error";function n(e,n){this._e=L(),this.name=r,e?"string"==typeof e?(this.message=e+(n?"\n "+n:""),this.inner=n||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=W[t]||r,this.inner=null)}return l(n).from(H),e[t]=n,e}),{});J.Syntax=SyntaxError,J.Type=TypeError,J.Range=RangeError;var Q=q.reduce((function(e,t){return e[t+"Error"]=J[t],e}),{}),Z=z.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=J[t]),e}),{});function ee(){}function te(e){return e}function re(e,t){return null==e||e===te?t:function(r){return t(e(r))}}function ne(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function ie(e,t){return e===ee?t:function(){var r=e.apply(this,arguments);void 0!==r&&(arguments[0]=r);var n=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?ne(n,this.onsuccess):n),i&&(this.onerror=this.onerror?ne(i,this.onerror):i),void 0!==o?o:r}}function oe(e,t){return e===ee?t:function(){e.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?ne(r,this.onsuccess):r),n&&(this.onerror=this.onerror?ne(n,this.onerror):n)}}function ue(e,t){return e===ee?t:function(r){var n=e.apply(this,arguments);i(r,n);var o=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?ne(o,this.onsuccess):o),u&&(this.onerror=this.onerror?ne(u,this.onerror):u),void 0===n?void 0===a?void 0:a:i(n,a)}}function ae(e,t){return e===ee?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function se(e,t){return e===ee?t:function(){var r=e.apply(this,arguments);if(r&&"function"==typeof r.then){for(var n=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return r.then((function(){return t.apply(n,o)}))}return t.apply(this,arguments)}}Z.ModifyError=$,Z.DexieError=Y,Z.BulkError=G;var fe={},ce=100,le=100,he="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,e.__proto__,e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,t.__proto__,e]}(),pe=he[0],de=he[1],ye=he[2],ve=de&&de.then,me=pe&&pe.constructor,ge=!!ye,be=!1,we=ye?function(){ye.then(Ne)}:n.setImmediate?setImmediate.bind(null,Ne):n.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){Ne(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Ne,0)},_e=function(e,t){Ie.push([e,t]),xe&&(we(),xe=!1)},Ee=!0,xe=!0,Ae=[],ke=[],Be=null,Se=te,Oe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ct,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{ct(e[0],e[1])}catch(e){}}))}},Pe=Oe,Ie=[],Ce=0,Te=[];function je(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ee,this._lib=!1;var t=this._PSD=Pe;if(M&&(this._stackHolder=L(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==fe)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Me(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,r){try{r((function(r){if(null===t._state){if(r===t)throw new TypeError("A promise cannot be resolved with itself.");var n=t._lib&&qe();r&&"function"==typeof r.then?e(t,(function(e,t){r instanceof je?r._then(e,t):r.then(e,t)})):(t._state=!0,t._value=r,Fe(t)),n&&ze()}}),Me.bind(null,t))}catch(r){Me(t,r)}}(this,e)}var Re={get:function(){var e=Pe,t=Je;function r(r,n){var i=this,o=!e.global&&(e!==Pe||t!==Je);o&&tt();var u=new je((function(t,u){Ue(i,new De(at(r,e,o),at(n,e,o),t,u,e))}));return M&&Le(u,this),u}return r.prototype=fe,r},set:function(e){c(this,"then",e&&e.prototype===fe?Re:{get:function(){return e},set:Re.set})}};function De(e,t,r,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=n,this.psd=i}function Me(e,t){if(ke.push(t),null===e._state){var r=e._lib&&qe();t=Se(t),e._state=!1,e._value=t,M&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,r){try{e.apply(null,void 0)}catch(e){}}((function(){var r=function e(t,r){var n;return h(t,r)||(n=o(t))&&e(n,r)}(t,"stack");t._promise=e,c(t,"stack",{get:function(){return be?r&&(r.get?r.get.apply(t):r.value):e.stack}})})),function(e){Ae.some((function(t){return t._value===e._value}))||Ae.push(e)}(e),Fe(e),r&&ze()}}function Fe(e){var t=e._listeners;e._listeners=[];for(var r=0,n=t.length;r<n;++r)Ue(e,t[r]);var i=e._PSD;--i.ref||i.finalize(),0===Ce&&(++Ce,_e((function(){0==--Ce&&We()}),[]))}function Ue(e,t){if(null!==e._state){var r=e._state?t.onFulfilled:t.onRejected;if(null===r)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ce,_e(Ke,[r,e,t])}else e._listeners.push(t)}function Ke(e,t,r){try{var n,i=(Be=t)._value;t._state?n=e(i):(ke.length&&(ke=[]),n=e(i),-1===ke.indexOf(i)&&function(e){for(var t=Ae.length;t;)if(Ae[--t]._value===e._value)return Ae.splice(t,1)}(t)),r.resolve(n)}catch(e){r.reject(e)}finally{Be=null,0==--Ce&&We(),--r.psd.ref||r.psd.finalize()}}function Le(e,t){var r=t?t._numPrev+1:0;r<ce&&(e._prev=t,e._numPrev=r)}function Ne(){qe()&&ze()}function qe(){var e=Ee;return xe=Ee=!1,e}function ze(){var e,t,r;do{for(;0<Ie.length;)for(e=Ie,Ie=[],r=e.length,t=0;t<r;++t){var n=e[t];n[0].apply(null,n[1])}}while(0<Ie.length);xe=Ee=!0}function We(){var e=Ae;Ae=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Te.slice(0),r=t.length;r;)t[--r]()}function Ye(e){return new je(fe,!1,e)}function Ve(e,t){var r=Pe;return function(){var n=qe(),i=Pe;try{return it(r,!0),e.apply(this,arguments)}catch(n){t&&t(n)}finally{it(i,!1),n&&ze()}}}s(je.prototype,{then:Re,_then:function(e,t){Ue(this,new De(null,null,e,t,Pe))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,r=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?r(e):Ye(e)})):this.then(null,(function(e){return e&&e.name===t?r(e):Ye(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),Ye(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{be=!0;var e=function e(t,r,n){if(r.length===n)return r;var i="";if(!1===t._state){var o,u,a=t._value;null!=a?(o=a.name||"Error",u=a.message||a,i=N(a,0)):(o=a,u=""),r.push(o+(u?": "+u:"")+i)}return M&&((i=N(t._stackHolder,2))&&-1===r.indexOf(i)&&r.push(i),t._prev&&e(t._prev,r,n)),r}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{be=!1}}},timeout:function(e,t){var r=this;return e<1/0?new je((function(n,i){var o=setTimeout((function(){return i(new J.Timeout(t))}),e);r.then(n,i).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&c(je.prototype,Symbol.toStringTag,"Dexie.Promise"),Oe.env=ot(),s(je,{all:function(){var e=D.apply(null,arguments).map(rt);return new je((function(t,r){0===e.length&&t([]);var n=e.length;e.forEach((function(i,o){return je.resolve(i).then((function(r){e[o]=r,--n||t(e)}),r)}))}))},resolve:function(e){if(e instanceof je)return e;if(e&&"function"==typeof e.then)return new je((function(t,r){e.then(t,r)}));var t=new je(fe,!0,e);return Le(t,Be),t},reject:Ye,race:function(){var e=D.apply(null,arguments).map(rt);return new je((function(t,r){e.map((function(e){return je.resolve(e).then(t,r)}))}))},PSD:{get:function(){return Pe},set:function(e){return Pe=e}},newPSD:Ze,usePSD:ut,scheduler:{get:function(){return _e},set:function(e){_e=e}},rejectionMapper:{get:function(){return Se},set:function(e){Se=e}},follow:function(e,t){return new je((function(r,n){return Ze((function(t,r){var n=Pe;n.unhandleds=[],n.onunhandled=r,n.finalize=ne((function(){var e=this;!function(e){Te.push((function t(){e(),Te.splice(Te.indexOf(t),1)})),++Ce,_e((function(){0==--Ce&&We()}),[])}((function(){0===e.unhandleds.length?t():r(e.unhandleds[0])}))}),n.finalize),e()}),t,r,n)}))}});var $e={awaits:0,echoes:0,id:0},Ge=0,Xe=[],He=0,Je=0,Qe=0;function Ze(e,t,r,n){var o=Pe,u=Object.create(o);u.parent=o,u.ref=0,u.global=!1,u.id=++Qe;var a=Oe.env;u.env=ge?{Promise:je,PromiseProp:{value:je,configurable:!0,writable:!0},all:je.all,race:je.race,resolve:je.resolve,reject:je.reject,nthen:st(a.nthen,u),gthen:st(a.gthen,u)}:{},t&&i(u,t),++o.ref,u.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=ut(u,e,r,n);return 0===u.ref&&u.finalize(),s}function et(){return $e.id||($e.id=++Ge),++$e.awaits,$e.echoes+=le,$e.id}function tt(e){!$e.awaits||e&&e!==$e.id||(0==--$e.awaits&&($e.id=0),$e.echoes=$e.awaits*le)}function rt(e){return $e.echoes&&e&&e.constructor===me?(et(),e.then((function(e){return tt(),e}),(function(e){return tt(),lt(e)}))):e}function nt(){var e=Xe[Xe.length-1];Xe.pop(),it(e,!1)}function it(e,t){var r=Pe;if((t?!$e.echoes||He++&&e===Pe:!He||--He&&e===Pe)||function(e){ve.call(pe,e)}(t?function(e){++Je,$e.echoes&&0!=--$e.echoes||($e.echoes=$e.id=0),Xe.push(Pe),it(e,!0)}.bind(null,e):nt),e!==Pe&&(Pe=e,r===Oe&&(Oe.env=ot()),ge)){var i=Oe.env.Promise,o=e.env;de.then=o.nthen,i.prototype.then=o.gthen,(r.global||e.global)&&(Object.defineProperty(n,"Promise",o.PromiseProp),i.all=o.all,i.race=o.race,i.resolve=o.resolve,i.reject=o.reject)}}function ot(){var e=n.Promise;return ge?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(n,"Promise"),all:e.all,race:e.race,resolve:e.resolve,reject:e.reject,nthen:de.then,gthen:e.prototype.then}:{}}function ut(e,t,r,n,i){var o=Pe;try{return it(e,!0),t(r,n,i)}finally{it(o,!1)}}function at(e,t,r){return"function"!=typeof e?e:function(){var n=Pe;r&&et(),it(t,!0);try{return e.apply(this,arguments)}finally{it(n,!1)}}}function st(e,t){return function(r,n){return e.call(this,at(r,t,!1),at(n,t,!1))}}-1===(""+ve).indexOf("[native code]")&&(et=tt=ee);var ft="unhandledrejection";function ct(e,t){var r;try{r=t.onuncatched(e)}catch(e){}if(!1!==r)try{var o,u={promise:t,reason:e};if(n.document&&document.createEvent?((o=document.createEvent("Event")).initEvent(ft,!0,!0),i(o,u)):n.CustomEvent&&i(o=new CustomEvent(ft,{detail:u}),u),o&&n.dispatchEvent&&(dispatchEvent(o),!n.PromiseRejectionEvent&&n.onunhandledrejection))try{n.onunhandledrejection(o)}catch(e){}M&&o&&!o.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var lt=je.reject;function ht(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)}var pt="3.0.0-beta.1",dt=String.fromCharCode(65535),yt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",vt="String expected.",mt=[],gt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),bt=gt,wt=gt,_t="__dbnames",Et="readonly",xt="readwrite";function At(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var kt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1},Bt=function(){function e(){}return e.prototype._trans=function(e,t,r){var n=this._tx||Pe.trans,i=this.name;function o(e,r,n){if(!n.schema[i])throw new J.NotFound("Table "+i+" not part of transaction");return t(n.idbtrans,n)}var u=qe();try{return n&&n.db===this.db?n===Pe.trans?n._promise(e,o,r):Ze((function(){return n._promise(e,o,r)}),{trans:n,transless:Pe.transless||Pe}):function e(t,r,n,i){if(t._state.openComplete||Pe.letThrough){var o=t._createTransaction(r,n,t._dbSchema);try{o.create()}catch(e){return lt(e)}return o._promise(r,(function(e,t){return Ze((function(){return Pe.trans=o,i(e,t,o)}))})).then((function(e){return o._completion.then((function(){return e}))}))}if(!t._state.isBeingOpened){if(!t._options.autoOpen)return lt(new J.DatabaseClosed);t.open().catch(ee)}return t._state.dbReadyPromise.then((function(){return e(t,r,n,i)}))}(this.db,e,[this.name],o)}finally{u&&ze()}},e.prototype.get=function(e,t){var r=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(function(t){return r.core.get({trans:t,key:e}).then((function(e){return r.hook.reading.fire(e)}))})).then(t)},e.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(r(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var n=t(e);if(1===n.length)return this.where(n[0]).equals(e[n[0]]);var i=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&n.every((function(t){return 0<=e.keyPath.indexOf(t)}))&&e.keyPath.every((function(e){return 0<=n.indexOf(e)}))}))[0];if(i&&this.db._maxKey!==dt)return this.where(i.name).equals(i.keyPath.map((function(t){return e[t]})));!i&&M&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+n.join("+")+"]");var o=this.schema.idxByName,u=this.db._deps.indexedDB;function a(e,t){try{return 0===u.cmp(e,t)}catch(e){return!1}}var s=n.reduce((function(t,n){var i=t[0],u=t[1],s=o[n],f=e[n];return[i||s,i||!s?At(u,s&&s.multi?function(e){var t=b(e,n);return r(t)&&t.some((function(e){return a(f,e)}))}:function(e){return a(f,b(e,n))}):u]}),[null,null]),f=s[0],c=s[1];return f?this.where(f.name).equals(e[f.keyPath]).filter(c):i?this.filter(c):this.where(n).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,r(e)?"["+e.join("+")+"]":e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){function t(t){if(!t)return t;var r=Object.create(e.prototype);for(var n in t)if(a(t,n))try{r[n]=t[n]}catch(t){}return r}return this.schema.mappedClass=e,this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e},e.prototype.defineClass=function(){return this.mapToClass((function(e){i(this,e)}))},e.prototype.add=function(e,t){var r=this;return this._trans("readwrite",(function(n){return r.core.mutate({trans:n,type:"add",keys:null!=t?[t]:null,values:[e]})})).then((function(e){return e.numFailures?je.reject(e.failures[0]):e.lastResult})).then((function(t){if(!r.core.schema.primaryKey.outbound)try{w(e,r.core.schema.primaryKey.keyPath,t)}catch(t){}return t}))},e.prototype.update=function(e,n){if("object"!=typeof n||r(n))throw new J.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||r(e))return this.where(":id").equals(e).modify(n);t(n).forEach((function(t){w(e,t,n[t])}));var i=b(e,this.schema.primKey.keyPath);return void 0===i?lt(new J.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(i).modify(n)},e.prototype.put=function(e,t){var r=this;return this._trans("readwrite",(function(n){return r.core.mutate({trans:n,type:"put",values:[e],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?je.reject(e.failures[0]):e.lastResult})).then((function(t){if(!r.core.schema.primaryKey.outbound)try{w(e,r.core.schema.primaryKey.keyPath,t)}catch(t){}return t}))},e.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(r){return t.core.mutate({trans:r,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?je.reject(e.failures[0]):void 0}))},e.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:kt})})).then((function(e){return e.numFailures?je.reject(e.failures[0]):void 0}))},e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(r){return t.core.getMany({keys:e,trans:r})}))},e.prototype.bulkAdd=function(e,t){var r=this;return this._trans("readwrite",(function(n){if(!r.core.schema.primaryKey.outbound&&t)throw new J.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");var i=e.length;return r.core.mutate({trans:n,type:"add",keys:t,values:e}).then((function(e){var t=e.numFailures,n=e.lastResult,o=e.failures;if(0===t)return n;throw new G(r.name+".bulkAdd(): "+t+" of "+i+" operations failed",Object.keys(o).map((function(e){return o[e]})))}))}))},e.prototype.bulkPut=function(e,t){var r=this;return this._trans("readwrite",(function(n){if(!r.core.schema.primaryKey.outbound&&t)throw new J.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");var i=e.length;return r.core.mutate({trans:n,type:"put",keys:t,values:e}).then((function(e){var t=e.numFailures,n=e.lastResult,o=e.failures;if(0===t)return n;throw new G(r.name+".bulkPut(): "+t+" of "+i+" operations failed",Object.keys(o).map((function(e){return o[e]})))}))}))},e.prototype.bulkDelete=function(e){var t=this,r=e.length;return this._trans("readwrite",(function(r){return t.core.mutate({trans:r,type:"delete",keys:e})})).then((function(e){var n=e.numFailures,i=e.lastResult,o=e.failures;if(0===n)return i;throw new G(t.name+".bulkDelete(): "+n+" of "+r+" operations failed",o)}))},e}();function St(e){var n={},i=function(t,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return n[t].subscribe.apply(null,o),e}if("string"==typeof t)return n[t]};i.addEventType=a;for(var o=1,u=arguments.length;o<u;++o)a(arguments[o]);return i;function a(e,o,u){if("object"==typeof e)return function(e){t(e).forEach((function(t){var n=e[t];if(r(n))a(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new J.InvalidArgument("Invalid event config");var i=a(t,te,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];i.subscribers.forEach((function(e){m((function(){e.apply(null,t)}))}))}))}}))}(e);o||(o=ae),u||(u=ee);var s={subscribers:[],fire:u,subscribe:function(e){-1===s.subscribers.indexOf(e)&&(s.subscribers.push(e),s.fire=o(s.fire,e))},unsubscribe:function(e){s.subscribers=s.subscribers.filter((function(t){return t!==e})),s.fire=s.subscribers.reduce(o,u)}};return n[e]=i[e]=s,s}}function Ot(e,t){return l(t).from({prototype:e}),t}function Pt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function It(e,t){e.filter=At(e.filter,t)}function Ct(e,t,r){var n=e.replayFilter;e.replayFilter=n?function(){return At(n(),t())}:t,e.justLimit=r&&!n}function Tt(e,t){if(e.isPrimKey)return t.primaryKey;var r=t.getIndexByKeyPath(e.index);if(!r)throw new J.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return r}function jt(e,t,r){var n=Tt(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:n,range:e.range}})}function Rt(e,t,r,n){var i=e.replayFilter?At(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},u=function(e,r,n){if(!i||i(r,n,(function(e){return r.stop(e)}),(function(e){return r.fail(e)}))){var u=r.primaryKey,s=""+u;"[object ArrayBuffer]"===s&&(s=""+new Uint8Array(u)),a(o,s)||(o[s]=!0,t(e,r,n))}};return Promise.all([e.or._iterate(u,r),Dt(jt(e,n,r),e.algorithm,u,!e.keysOnly&&e.valueMapper)])}return Dt(jt(e,n,r),At(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Dt(e,t,r,n){var i=Ve(n?function(e,t,i){return r(n(e),t,i)}:r);return e.then((function(e){if(e)return e.start((function(){var r=function(){return e.continue()};t&&!t(e,(function(e){return r=e}),(function(t){e.stop(t),r=ee}),(function(t){e.fail(t),r=ee}))||i(e.value,e,(function(e){return r=e})),r()}))}))}var Mt=function(){function e(){}return e.prototype._read=function(e,t){var r=this._ctx;return r.error?r.table._trans(null,lt.bind(null,r.error)):r.table._trans("readonly",e).then(t)},e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,lt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=At(t.algorithm,e)},e.prototype._iterate=function(e,t){return Rt(this._ctx,e,t,this._ctx.table.core)},e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&i(r,e),t._ctx=r,t},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var t=this._ctx;return this._read((function(r){return Rt(t,e,r,t.table.core)}))},e.prototype.count=function(e){var t=this;return this._read((function(e){var r=t._ctx,n=r.table.core;if(Pt(r,!0))return n.count({trans:e,query:{index:Tt(r,n.schema),range:r.range}}).then((function(e){return Math.min(e,r.limit)}));var i=0;return Rt(r,(function(){return++i,!1}),e,n).then((function(){return i}))})).then(e)},e.prototype.sortBy=function(e,t){var r=e.split(".").reverse(),n=r[0],i=r.length-1;function o(e,t){return t?o(e[r[t]],t-1):e[n]}var u="next"===this._ctx.dir?1:-1;function a(e,t){var r=o(e,i),n=o(t,i);return r<n?-u:n<r?u:0}return this.toArray((function(e){return e.sort(a)})).then(t)},e.prototype.toArray=function(e){var t=this;return this._read((function(e){var r=t._ctx;if("next"===r.dir&&Pt(r,!0)&&0<r.limit){var n=r.valueMapper,i=Tt(r,r.table.core.schema);return r.table.core.query({trans:e,limit:r.limit,values:!0,query:{index:i,range:r.range}}).then((function(e){var t=e.result;return n?t.map(n):t}))}var o=[];return Rt(r,(function(e){return o.push(e)}),e,r.table.core).then((function(){return o}))}),e)},e.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Pt(t)?Ct(t,(function(){var t=e;return function(e,r){return 0===t||(1===t?--t:r((function(){e.advance(t),t=0})),!1)}})):Ct(t,(function(){var t=e;return function(){return--t<0}}))),this},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Ct(this._ctx,(function(){var t=e;return function(e,r,n){return--t<=0&&r(n),0<=t}}),!0),this},e.prototype.until=function(e,t){return It(this._ctx,(function(r,n,i){return!e(r.value)||(n(i),t)})),this},e.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){return It(this._ctx,(function(t){return e(t.value)})),function(e,t){e.isMatch=At(e.isMatch,t)}(this._ctx,e),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,r){e(r.key,r)}))},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,r){e(r.primaryKey,r)}))},e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each((function(e,t){r.push(t.key)})).then((function(){return r})).then(e)},e.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&Pt(t,!0)&&0<t.limit)return this._read((function(e){var r=Tt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:r,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each((function(e,t){r.push(t.primaryKey)})).then((function(){return r})).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var r={};return It(this._ctx,(function(e){var t=e.primaryKey.toString(),n=a(r,t);return r[t]=!0,!n})),this},e.prototype.modify=function(e){var r=this,n=this._ctx;return this._write((function(i){var o;if("function"==typeof e)o=e;else{var u=t(e),a=u.length;o=function(t){for(var r=!1,n=0;n<a;++n){var i=u[n],o=e[i];b(t,i)!==o&&(w(t,i,o),r=!0)}return r}}function s(e,t){var r=t.failures,n=t.numFailures;for(var i in v+=e-n,r)y.push(r[i])}var f=n.table.core,c=f.schema.primaryKey,l=c.outbound,h=c.extractKey,p="testmode"in _r?1:2e3,d=r.db.core.cmp,y=[],v=0,m=[];return r.clone().primaryKeys().then((function(e){var t=function(r){var n=Math.min(p,e.length-r);return f.getMany({trans:i,keys:e.slice(r,r+n)}).then((function(u){for(var a=[],c=[],y=l?[]:null,v=[],m=0;m<n;++m){var g=u[m],b={value:S(g),primKey:e[r+m]};!1!==o.call(b,b.value,b)&&(null==b.value?v.push(e[r+m]):l||0===d(h(g),h(b.value))?(c.push(b.value),l&&y.push(e[r+m])):(v.push(e[r+m]),a.push(b.value)))}return Promise.resolve(0<a.length&&f.mutate({trans:i,type:"add",values:a}).then((function(e){for(var t in e.failures)v.splice(parseInt(t),1);s(a.length,e)}))).then((function(e){return 0<c.length&&f.mutate({trans:i,type:"put",keys:y,values:c}).then((function(e){return s(c.length,e)}))})).then((function(){return 0<v.length&&f.mutate({trans:i,type:"delete",keys:v}).then((function(e){return s(v.length,e)}))})).then((function(){return e.length>r+n&&t(r+p)}))}))};return t(0).then((function(){if(0<y.length)throw new $("Error modifying one or more objects",y,v,m);return e.length}))}))}))},e.prototype.delete=function(){var e=this._ctx,t=e.range;return Pt(e)&&(e.isPrimKey&&!wt||3===t.type)?this._write((function(r){var n=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:r,query:{index:n,range:i}}).then((function(t){return e.table.core.mutate({trans:r,type:"deleteRange",range:i}).then((function(e){var r=e.failures,n=(e.lastResult,e.results,e.numFailures);if(n)throw new $("Could not delete some values",Object.keys(r).map((function(e){return r[e]})),t-n);return t-n}))}))})):this.modify((function(e,t){return t.value=null}))},e}();function Ft(e,t){return e<t?-1:e===t?0:1}function Ut(e,t){return t<e?-1:e===t?0:1}function Kt(e,t,r){var n=e instanceof Yt?new e.Collection(e):e;return n._ctx.error=r?new r(t):new TypeError(t),n}function Lt(e){return new e.Collection(e,(function(){return Wt("")})).limit(0)}function Nt(e,t,r,n,i,o){for(var u=Math.min(e.length,n.length),a=-1,s=0;s<u;++s){var f=t[s];if(f!==n[s])return i(e[s],r[s])<0?e.substr(0,s)+r[s]+r.substr(s+1):i(e[s],n[s])<0?e.substr(0,s)+n[s]+r.substr(s+1):0<=a?e.substr(0,a)+t[a]+r.substr(a+1):null;i(e[s],f)<0&&(a=s)}return u<n.length&&"next"===o?e+r.substr(e.length):u<e.length&&"prev"===o?e.substr(0,r.length):a<0?null:e.substr(0,a)+n[a]+r.substr(a+1)}function qt(e,t,r,n){var i,o,u,a,s,f,c,l=r.length;if(!r.every((function(e){return"string"==typeof e})))return Kt(e,vt);function h(e){i=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),o=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),u="next"===e?Ft:Ut;var t=r.map((function(e){return{lower:o(e),upper:i(e)}})).sort((function(e,t){return u(e.lower,t.lower)}));a=t.map((function(e){return e.upper})),s=t.map((function(e){return e.lower})),c="next"===(f=e)?"":n}h("next");var p=new e.Collection(e,(function(){return zt(a[0],s[l-1]+n)}));p._ondirectionchange=function(e){h(e)};var d=0;return p._addAlgorithm((function(e,r,n){var i=e.key;if("string"!=typeof i)return!1;var h=o(i);if(t(h,s,d))return!0;for(var p=null,y=d;y<l;++y){var v=Nt(i,h,a[y],s[y],u,f);null===v&&null===p?d=y+1:(null===p||0<u(p,v))&&(p=v)}return r(null!==p?function(){e.continue(p+c)}:n),!1})),p}function zt(e,t,r,n){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:n}}function Wt(e){return{type:1,lower:e,upper:e}}var Yt=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!0,configurable:!0}),e.prototype.between=function(e,t,r,n){r=!1!==r,n=!0===n;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(r||n)&&(!r||!n)?Lt(this):new this.Collection(this,(function(){return zt(e,t,!r,!n)}))}catch(e){return Kt(this,yt)}},e.prototype.equals=function(e){return new this.Collection(this,(function(){return Wt(e)}))},e.prototype.above=function(e){return null==e?Kt(this,yt):new this.Collection(this,(function(){return zt(e,void 0,!0)}))},e.prototype.aboveOrEqual=function(e){return null==e?Kt(this,yt):new this.Collection(this,(function(){return zt(e,void 0,!1)}))},e.prototype.below=function(e){return null==e?Kt(this,yt):new this.Collection(this,(function(){return zt(void 0,e,!1,!0)}))},e.prototype.belowOrEqual=function(e){return null==e?Kt(this,yt):new this.Collection(this,(function(){return zt(void 0,e)}))},e.prototype.startsWith=function(e){return"string"!=typeof e?Kt(this,vt):this.between(e,e+dt,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):qt(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],dt)},e.prototype.equalsIgnoreCase=function(e){return qt(this,(function(e,t){return e===t[0]}),[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=D.apply(R,arguments);return 0===e.length?Lt(this):qt(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=D.apply(R,arguments);return 0===e.length?Lt(this):qt(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,dt)},e.prototype.anyOf=function(){var e=this,t=D.apply(R,arguments),r=this._cmp;try{t.sort(r)}catch(n){return Kt(this,yt)}if(0===t.length)return Lt(this);var n=new this.Collection(this,(function(){return zt(t[0],t[t.length-1])}));n._ondirectionchange=function(n){r="next"===n?e._ascending:e._descending,t.sort(r)};var i=0;return n._addAlgorithm((function(e,n,o){for(var u=e.key;0<r(u,t[i]);)if(++i===t.length)return n(o),!1;return 0===r(u,t[i])||(n((function(){e.continue(t[i])})),!1)})),n},e.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=D.apply(R,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Kt(this,yt)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,t){var r=this,n=this._cmp,i=this._ascending,o=this._descending,u=this._min,a=this._max;if(0===e.length)return Lt(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0})))return Kt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",J.InvalidArgument);var s,f=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers,l=i;function h(e,t){return l(e[0],t[0])}try{(s=e.reduce((function(e,t){for(var r=0,i=e.length;r<i;++r){var o=e[r];if(n(t[0],o[1])<0&&0<n(t[1],o[0])){o[0]=u(o[0],t[0]),o[1]=a(o[1],t[1]);break}}return r===i&&e.push(t),e}),[])).sort(h)}catch(e){return Kt(this,yt)}var p=0,d=c?function(e){return 0<i(e,s[p][1])}:function(e){return 0<=i(e,s[p][1])},y=f?function(e){return 0<o(e,s[p][0])}:function(e){return 0<=o(e,s[p][0])},v=d,m=new this.Collection(this,(function(){return zt(s[0][0],s[s.length-1][1],!f,!c)}));return m._ondirectionchange=function(e){l="next"===e?(v=d,i):(v=y,o),s.sort(h)},m._addAlgorithm((function(e,t,n){for(var o=e.key;v(o);)if(++p===s.length)return t(n),!1;return!!function(e){return!d(e)&&!y(e)}(o)||(0===r._cmp(o,s[p][1])||0===r._cmp(o,s[p][0])||t((function(){l===i?e.continue(s[p][0]):e.continue(s[p][1])})),!1)})),m},e.prototype.startsWithAnyOf=function(){var e=D.apply(R,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?Lt(this):this.inAnyRange(e.map((function(e){return[e,e+dt]}))):Kt(this,"startsWithAnyOf() only works with strings")},e}();function Vt(e){return 1===e.length?e[0]:e}function $t(e){try{return e.only([[]]),[[]]}catch(e){return dt}}function Gt(e){return Ve((function(t){return Xt(t),e(t.target.error),!1}))}function Xt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Ht=function(){function e(){}return e.prototype._lock=function(){return v(!Pe.global),++this._reculock,1!==this._reculock||Pe.global||(Pe.lockOwnerFor=this),this},e.prototype._unlock=function(){if(v(!Pe.global),0==--this._reculock)for(Pe.global||(Pe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{ut(e[1],e[0])}catch(e){}}return this},e.prototype._locked=function(){return this._reculock&&Pe.lockOwnerFor!==this},e.prototype.create=function(e){var t=this;if(!this.mode)return this;var r=this.db.idbdb,n=this.db._state.dbOpenError;if(v(!this.idbtrans),!e&&!r)switch(n&&n.name){case"DatabaseClosedError":throw new J.DatabaseClosed(n);case"MissingAPIError":throw new J.MissingAPI(n.message,n);default:throw new J.OpenFailed(n)}if(!this.active)throw new J.TransactionInactive;return v(null===this._completion._state),(e=this.idbtrans=e||r.transaction(Vt(this.storeNames),this.mode)).onerror=Ve((function(r){Xt(r),t._reject(e.error)})),e.onabort=Ve((function(r){Xt(r),t.active&&t._reject(new J.Abort(e.error)),t.active=!1,t.on("abort").fire(r)})),e.oncomplete=Ve((function(){t.active=!1,t._resolve()})),this},e.prototype._promise=function(e,t,r){var n=this;if("readwrite"===e&&"readwrite"!==this.mode)return lt(new J.ReadOnly("Transaction is readonly"));if(!this.active)return lt(new J.TransactionInactive);if(this._locked())return new je((function(i,o){n._blockedFuncs.push([function(){n._promise(e,t,r).then(i,o)},Pe])}));if(r)return Ze((function(){var e=new je((function(e,r){n._lock();var i=t(e,r,n);i&&i.then&&i.then(e,r)}));return e.finally((function(){return n._unlock()})),e._lib=!0,e}));var i=new je((function(e,r){var i=t(e,r,n);i&&i.then&&i.then(e,r)}));return i._lib=!0,i},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var t=this._root(),r=je.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return r}));else{t._waitingFor=r,t._waitingQueue=[];var n=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(n.get(-1/0).onsuccess=e)}()}var i=t._waitingFor;return new je((function(e,n){r.then((function(r){return t._waitingQueue.push(Ve(e.bind(null,r)))}),(function(e){return t._waitingQueue.push(Ve(n.bind(null,e)))})).finally((function(){t._waitingFor===i&&(t._waitingFor=null)}))}))},e.prototype.abort=function(){this.active&&this._reject(new J.Abort),this.active=!1},e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(a(t,e))return t[e];var r=this.schema[e];if(!r)throw new J.NotFound("Table "+e+" not part of transaction");var n=new this.db.Table(e,r,this);return n.core=this.db.core.table(e),t[e]=n},e}();function Jt(e,t,r,n,i,o){return{name:e,keyPath:t,unique:r,multi:n,auto:i,compound:o,src:(r?"&":"")+(n?"*":"")+(i?"++":"")+Qt(t)}}function Qt(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function Zt(e,t,r){return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:g(r,(function(e){return[e.name,e]}))}}function er(e){return null==e?function(){}:"string"==typeof e?function(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return b(t,e)}}(e):function(t){return b(t,e)}}function tr(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}function rr(e){return[].slice.call(e)}var nr=0;function ir(e){return null==e?":id":"string"==typeof e?e:"["+e.join("+")+"]"}function or(e,t,n,i){var o=t.cmp.bind(t);function u(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var t=e.lower,r=e.upper,i=e.lowerOpen,o=e.upperOpen;return void 0===t?void 0===r?null:n.upperBound(r,!!o):void 0===r?n.lowerBound(t,!!i):n.bound(t,r,!!i,!!o)}var a,s,f,c=(s=i,f=rr((a=e).objectStoreNames),{schema:{name:a.name,tables:f.map((function(e){return s.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,i=r(t),o=null==t,u={},a={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:o,compound:i,keyPath:t,autoIncrement:n,unique:!0,extractKey:er(t)},indexes:rr(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,i=e.multiEntry,o=e.keyPath,a={name:t,compound:r(o),keyPath:o,unique:n,multiEntry:i,extractKey:er(o)};return u[ir(o)]=a})),getIndexByKeyPath:function(e){return u[ir(e)]}};return u[":id"]=a.primaryKey,null!=t&&(u[ir(t)]=a.primaryKey),a}))},hasGetAll:0<f.length&&"getAll"in s.objectStore(f[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),l=c.schema,h=c.hasGetAll,p=l.tables.map((function(e){return function(e){var t,r=e.name;return{name:r,schema:e,mutate:function(t){var n=t.trans,i=t.type,o=t.keys,a=t.values,s=t.range,f=t.wantResults;return new Promise((function(t,c){t=Ve(t);var l=n.objectStore(r),h=null==l.keyPath,p="put"===i||"add"===i;if(!p&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var d=(o||a||{length:1}).length;if(o&&a&&o.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===d)return t({numFailures:0,failures:{},results:[],lastResult:void 0});function y(e){++w,Xt(e),g&&(g[e.target._reqno]=void 0),b[e.target._reqno]=e.target.error}function v(e){var t=e.target;g[t._reqno]=t.result}var m,g=f&&(o||tr(e.primaryKey,{type:i,keys:o,values:a})).slice(),b=[],w=0;if("deleteRange"===i){if(4===s.type)return t({numFailures:w,failures:b,results:g,lastResult:void 0});m=3===s.type?l.clear():l.delete(u(s))}else{var _=p?h?[a,o]:[a,null]:[o,null],E=_[0],x=_[1];if(p)for(var A=0;A<d;++A)(m=x&&void 0!==x[A]?l[i](E[A],x[A]):l[i](E[A]))._reqno=A,g&&void 0===g[A]&&(m.onsuccess=v),m.onerror=y;else for(A=0;A<d;++A)(m=l[i](E[A]))._reqno=A,m.onerror=y}function k(e){var r=e.target.result;g&&(g[d-1]=r),t({numFailures:w,failures:b,results:g,lastResult:r})}m.onerror=function(e){y(e),k(e)},m.onsuccess=k}))},getMany:function(e){var t=e.trans,n=e.keys;return new Promise((function(e,i){e=Ve(e);for(var o,u=t.objectStore(r),a=n.length,s=new Array(a),f=0,c=0,l=function(t){var r=t.target;s[r._pos]=r.result,++c===f&&e(s)},h=Gt(i),p=0;p<a;++p)null!=n[p]&&((o=u.get(n[p]))._pos=p,o.onsuccess=l,o.onerror=h,++f);0===f&&e(s)}))},get:function(e){var t=e.trans,n=e.key;return new Promise((function(e,i){e=Ve(e);var o=t.objectStore(r).get(n);o.onsuccess=function(t){return e(t.target.result)},o.onerror=Gt(i)}))},query:(t=h,function(e){return new Promise((function(n,i){n=Ve(n);var o=e.trans,a=e.values,s=e.limit,f=e.query,c=s===1/0?void 0:s,l=f.index,h=f.range,p=o.objectStore(r),d=l.isPrimaryKey?p:p.index(l.name),y=u(h);if(0===s)return n({result:[]});if(t){var v=a?d.getAll(y,c):d.getAllKeys(y,c);v.onsuccess=function(e){return n({result:e.target.result})},v.onerror=Gt(i)}else{var m=0,g=!a&&"openKeyCursor"in d?d.openKeyCursor(y):d.openCursor(y),b=[];g.onsuccess=function(e){var t=g.result;return t?(b.push(a?t.value:t.primaryKey),++m===s?n({result:b}):void t.continue()):n({result:b})},g.onerror=Gt(i)}}))}),openCursor:function(e){var t=e.trans,n=e.values,i=e.query,o=e.reverse,a=e.unique;return new Promise((function(e,s){e=Ve(e);var f=i.index,c=i.range,l=t.objectStore(r),h=f.isPrimaryKey?l:l.index(f.name),p=o?a?"prevunique":"prev":a?"nextunique":"next",d=!n&&"openKeyCursor"in h?h.openKeyCursor(u(c),p):h.openCursor(u(c),p);d.onerror=Gt(s),d.onsuccess=Ve((function(r){var n=d.result;if(n){n.___id=++nr,n.done=!1;var i=n.continue.bind(n),o=n.continuePrimaryKey;o&&(o=o.bind(n));var u=n.advance.bind(n),a=function(){throw new Error("Cursor not stopped")};n.trans=t,n.stop=n.continue=n.continuePrimaryKey=n.advance=function(){throw new Error("Cursor not started")},n.fail=Ve(s),n.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},n.start=function(e){function t(){if(d.result)try{e()}catch(e){n.fail(e)}else n.done=!0,n.start=function(){throw new Error("Cursor behind last entry")},n.stop()}var r=new Promise((function(e,t){e=Ve(e),d.onerror=Gt(t),n.fail=t,n.stop=function(t){n.stop=n.continue=n.continuePrimaryKey=n.advance=a,e(t)}}));return d.onsuccess=Ve((function(e){(d.onsuccess=t)()})),n.continue=i,n.continuePrimaryKey=o,n.advance=u,t(),r},e(n)}else e(null)}),s)}))},count:function(e){var t=e.query,n=e.trans,i=t.index,o=t.range;return new Promise((function(e,t){var a=n.objectStore(r),s=i.isPrimaryKey?a:a.index(i.name),f=u(o),c=f?s.count(f):s.count();c.onsuccess=Ve((function(t){return e(t.target.result)})),c.onerror=Gt(t)}))}}}(e)})),d={};return p.forEach((function(e){return d[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!d[e])throw new Error("Table '"+e+"' not found");return d[e]},cmp:o,MIN_KEY:-1/0,MAX_KEY:$t(n),schema:l}}function ur(t,r){var n=r.db,i=function(t,r,n,i){var o=n.IDBKeyRange;return{dbcore:function(t,r){return r.reduce((function(t,r){var n=r.create;return e({},t,n(t))}),t)}(or(r,n.indexedDB,o,i),t.dbcore)}}(t._middlewares,n,t._deps,r);t.core=i.dbcore,t.tables.forEach((function(e){var r=e.name;t.core.schema.tables.some((function(e){return e.name===r}))&&(e.core=t.core.table(r),t[r]instanceof t.Table&&(t[r].core=e.core))}))}function ar(e,t,r,n){r.forEach((function(r){var i=n[r];t.forEach((function(t){r in t||(t===e.Transaction.prototype||t instanceof e.Transaction?c(t,r,{get:function(){return this.table(r)}}):t[r]=new e.Table(r,i))}))}))}function sr(e,t){t.forEach((function(t){for(var r in t)t[r]instanceof e.Table&&delete t[r]}))}function fr(e,t){return e._cfg.version-t._cfg.version}function cr(e,t,r,n){var i=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach((function(e){return lr(i,e)})),i}function lr(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function hr(e,t,r){for(var i=r.db.objectStoreNames,o=0;o<i.length;++o){var u=i[o],a=r.objectStore(u);e._hasGetAll="getAll"in a;for(var s=0;s<a.indexNames.length;++s){var f=a.indexNames[s],c=a.index(f).keyPath,l="string"==typeof c?c:"["+d(c).join("+")+"]";if(t[u]){var h=t[u].idxByName[l];h&&(h.name=f)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&n.WorkerGlobalScope&&n instanceof n.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}var pr,dr=function(){function e(){}return e.prototype._parseStoresSpec=function(e,n){t(e).forEach((function(t){if(null!==e[t]){var i=function(e){var t=[];return e.split(",").forEach((function(e){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),i=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;t.push(Jt(n,i||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),r(i)))})),t}(e[t]),o=i.shift();if(o.multi)throw new J.Schema("Primary key cannot be multi-valued");i.forEach((function(e){if(e.auto)throw new J.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new J.Schema("Index must have a name and cannot be an empty string")})),n[t]=Zt(t,o,i)}}))},e.prototype.stores=function(e){var r=this.db;this._cfg.storesSource=this._cfg.storesSource?i(this._cfg.storesSource,e):e;var n=r._versions,o={};n.forEach((function(e){i(o,e._cfg.storesSource)}));var u=this._cfg.dbschema={};return this._parseStoresSpec(o,u),r._dbSchema=u,sr(r,[r._allTables,r,r.Transaction.prototype]),ar(r,[r._allTables,r,r.Transaction.prototype,this._cfg.tables],t(u),u),r._storeNames=t(u),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=e,this},e}();function yr(e){return Ze((function(){return Pe.letThrough=!0,e()}))}function vr(e){var r=e._state,n=e._deps.indexedDB;if(r.isBeingOpened||e.idbdb)return r.dbReadyPromise.then((function(){return r.dbOpenError?lt(r.dbOpenError):e}));M&&(r.openCanceller._stackHolder=L()),r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;var i=r.dbReadyResolve,o=null;return je.race([r.openCanceller,new je((function(i,u){if(!n)throw new J.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var a=e.name,s=r.autoSchema?n.open(a):n.open(a,Math.round(10*e.verno));if(!s)throw new J.MissingAPI("IndexedDB API not available");s.onerror=Gt(u),s.onblocked=Ve(e._fireOnBlocked),s.onupgradeneeded=Ve((function(i){if(o=s.transaction,r.autoSchema&&!e._options.allowEmptyDB){s.onerror=Xt,o.abort(),s.result.close();var f=n.deleteDatabase(a);f.onsuccess=f.onerror=Ve((function(){u(new J.NoSuchDatabase("Database "+a+" doesnt exist"))}))}else{o.onerror=Gt(u);var c=i.oldVersion>Math.pow(2,62)?0:i.oldVersion;!function(e,r,n,i){var o=e._dbSchema,u=e._createTransaction("readwrite",e._storeNames,o);u.create(n),u._completion.catch(i);var a=u._reject.bind(u),s=Pe.transless||Pe;Ze((function(){Pe.trans=u,Pe.transless=s,0===r?(t(o).forEach((function(e){cr(n,e,o[e].primKey,o[e].indexes)})),ur(e,n),je.follow((function(){return e.on.populate.fire(u)})).catch(a)):function(e,r,n,i){var o=[],u=e._versions,a=u.filter((function(e){return e._cfg.version===r}))[0];if(!a)throw new J.Upgrade("Dexie specification of currently installed DB version is missing");var s=e._dbSchema=a._cfg.dbschema,f=!1;return u.filter((function(e){return e._cfg.version>r})).forEach((function(r){o.push((function(){var o=s,u=r._cfg.dbschema;hr(e,o,i),hr(e,u,i),s=e._dbSchema=u;var a=function(e,t){var r,n={del:[],add:[],change:[]};for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],o=t[r];if(i){var u={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src)u.recreate=!0,n.change.push(u);else{var a=i.idxByName,s=o.idxByName,f=void 0;for(f in a)s[f]||u.del.push(f);for(f in s){var c=a[f],l=s[f];c?c.src!==l.src&&u.change.push(l):u.add.push(l)}(0<u.del.length||0<u.add.length||0<u.change.length)&&n.change.push(u)}}else n.add.push([r,o])}return n}(o,u);a.add.forEach((function(e){cr(i,e[0],e[1].primKey,e[1].indexes)})),a.change.forEach((function(e){if(e.recreate)throw new J.Upgrade("Not yet support for changing primary key");var t=i.objectStore(e.name);e.add.forEach((function(e){return lr(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),lr(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var c=r._cfg.contentUpgrade;if(c){ur(e,i),f=!0;var l,h=_(u);a.del.forEach((function(e){h[e]=o[e]})),sr(e,[e.Transaction.prototype]),ar(e,[e.Transaction.prototype],t(h),h),n.schema=h,et();var p=je.follow((function(){if(l=c(n))if(l.constructor===me){var e=tt.bind(null,null);l.then(e,e)}else tt();else tt()}));return l&&"function"==typeof l.then?je.resolve(l):p.then((function(){return l}))}})),o.push((function(t){f&&bt||function(e,t){for(var r=0;r<t.db.objectStoreNames.length;++r){var n=t.db.objectStoreNames[r];null==e[n]&&t.db.deleteObjectStore(n)}}(r._cfg.dbschema,t),sr(e,[e.Transaction.prototype]),ar(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}))})),function e(){return o.length?je.resolve(o.shift()(n.idbtrans)).then(e):je.resolve()}().then((function(){!function(e,r){t(e).forEach((function(t){r.db.objectStoreNames.contains(t)||cr(r,t,e[t].primKey,e[t].indexes)}))}(s,i)}))}(e,r,u,n).catch(a)}))}(e,c/10,o,u)}}),u),s.onsuccess=Ve((function(){o=null;var n=e.idbdb=s.result,u=d(n.objectStoreNames);if(0<u.length)try{var f=n.transaction(Vt(u),"readonly");r.autoSchema?function(e,r,n){e.verno=r.version/10;var i=e._dbSchema={},o=e._storeNames=d(r.objectStoreNames,0);0!==o.length&&(o.forEach((function(e){for(var t=n.objectStore(e),r=t.keyPath,o=Jt(Qt(r),r||"",!1,!1,!!t.autoIncrement,r&&"string"!=typeof r),u=[],a=0;a<t.indexNames.length;++a){var s=t.index(t.indexNames[a]);r=s.keyPath;var f=Jt(s.name,r,!!s.unique,!!s.multiEntry,!1,r&&"string"!=typeof r);u.push(f)}i[e]=Zt(e,o,u)})),ar(e,[e._allTables],t(i),i))}(e,n,f):hr(e,e._dbSchema,f),ur(e,f)}catch(n){}mt.push(e),n.onversionchange=Ve((function(t){r.vcFired=!0,e.on("versionchange").fire(t)})),pr.add(a),i()}),u)}))]).then((function(){return r.onReadyBeingFired=[],je.resolve(yr(e.on.ready.fire)).then((function e(){if(0<r.onReadyBeingFired.length){var t=r.onReadyBeingFired.reduce(se,ee);return r.onReadyBeingFired=[],je.resolve(yr(t)).then(e)}}))})).finally((function(){r.onReadyBeingFired=null})).then((function(){return r.isBeingOpened=!1,e})).catch((function(t){try{o&&o.abort()}catch(t){}return r.isBeingOpened=!1,e.close(),r.dbOpenError=t,lt(r.dbOpenError)})).finally((function(){r.openComplete=!0,i()}))}function mr(e){function t(t){return e.next(t)}var n=o(t),i=o((function(t){return e.throw(t)}));function o(e){return function(t){var o=e(t),u=o.value;return o.done?u:u&&"function"==typeof u.then?u.then(n,i):r(u)?Promise.all(u).then(n,i):n(u)}}return o(t)()}function gr(e,t,n){for(var i=r(e)?e.slice():[e],o=0;o<n;++o)i.push(t);return i}var br={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return e({},t,{table:function(r){var n=t.table(r),i=n.schema,o={},u=[];function a(t,r,n){var i=ir(t),s=o[i]=o[i]||[],f=null==t?0:"string"==typeof t?1:t.length,c=0<r,l=e({},n,{isVirtual:c,isPrimaryKey:!c&&n.isPrimaryKey,keyTail:r,keyLength:f,extractKey:er(t),unique:!c&&n.unique});return s.push(l),l.isPrimaryKey||u.push(l),1<f&&a(2===f?t[0]:t.slice(0,f-1),r+1,n),s.sort((function(e,t){return e.keyTail-t.keyTail})),l}var s=a(i.primaryKey.keyPath,0,i.primaryKey);o[":id"]=[s];for(var f=0,c=i.indexes;f<c.length;f++){var l=c[f];a(l.keyPath,0,l)}function h(r){var n=r.query.index;return n.isVirtual?e({},r,{query:{index:n,range:function(e,r){return{type:1===e.type?2:e.type,lower:gr(e.lower,e.lowerOpen?t.MAX_KEY:t.MIN_KEY,r),lowerOpen:!0,upper:gr(e.upper,e.upperOpen?t.MIN_KEY:t.MAX_KEY,r),upperOpen:!0}}(r.query.range,n.keyTail)}}):r}return e({},n,{schema:e({},i,{primaryKey:s,indexes:u,getIndexByKeyPath:function(e){var t=o[ir(e)];return t&&t[0]}}),count:function(e){return n.count(h(e))},query:function(e){return n.query(h(e))},openCursor:function(e){var r=e.query.index,i=r.keyTail,o=r.isVirtual,u=r.keyLength;return o?n.openCursor(h(e)).then((function(r){return r&&function(r){return Object.create(r,{continue:{value:function(n){null!=n?r.continue(gr(n,e.reverse?t.MAX_KEY:t.MIN_KEY,i)):e.unique?r.continue(gr(r.key,e.reverse?t.MIN_KEY:t.MAX_KEY,i)):r.continue()}},continuePrimaryKey:{value:function(e,n){r.continuePrimaryKey(gr(e,t.MAX_KEY,i),n)}},key:{get:function(){var e=r.key;return 1===u?e[0]:e.slice(0,u)}},value:{get:function(){return r.value}}})}(r)})):n.openCursor(e)}})}})}},wr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return e({},t,{table:function(r){var n=t.table(r),i=n.schema.primaryKey;return e({},n,{mutate:function(t){var o=Pe.trans,u=o.table(r).hook,a=u.deleting,s=u.creating,f=u.updating;switch(t.type){case"add":if(s.fire===ee)break;return o._promise("readwrite",(function(){return c(t)}),!0);case"put":if(s.fire===ee&&f.fire===ee)break;return o._promise("readwrite",(function(){return c(t)}),!0);case"delete":if(a.fire===ee)break;return o._promise("readwrite",(function(){return c(t)}),!0);case"deleteRange":if(a.fire===ee)break;return o._promise("readwrite",(function(){return function(t){return function t(r,o,u){return n.query({trans:r,values:!1,query:{index:i,range:o},limit:u}).then((function(n){var i=n.result;return c({type:"delete",keys:i,trans:r}).then((function(n){return 0<n.numFailures?Promise.reject(n.failures[0]):i.length<u?{failures:[],numFailures:0,lastResult:void 0}:t(r,e({},o,{lower:i[i.length-1],lowerOpen:!0}),u)}))}))}(t.trans,t.range,1e4)}(t)}),!0)}return n.mutate(t);function c(t){var r=Pe.trans,o=t.keys||tr(i,t);if(!o)throw new Error("Keys missing");return"delete"!==(t="add"===t.type||"put"===t.type?e({},t,{keys:o,wantResults:!0}):e({},t)).type&&(t.values=t.values.slice()),t.keys&&(t.keys=t.keys.slice()),function(e,t,r){return"add"===t.type?Promise.resolve(new Array(t.values.length)):e.getMany({trans:t.trans,keys:r})}(n,t,o).then((function(e){var u=o.map((function(n,o){var u=e[o],c={onerror:null,onsuccess:null};if("delete"===t.type)a.fire.call(c,n,u,r);else if("add"===t.type||void 0===u){var l=s.fire.call(c,n,t.values[o],r);null==n&&null!=l&&(n=l,t.keys[o]=n,i.outbound||w(t.values[o],i.keyPath,n))}else{var h=C(u,t.values[o]),p=f.fire.call(c,h,n,u,r);if(p){var d=t.values[o];Object.keys(p).forEach((function(e){w(d,e,p[e])}))}}return c}));return n.mutate(t).then((function(r){for(var n=r.failures,i=r.results,a=r.numFailures,s=r.lastResult,f=0;f<o.length;++f){var c=i?i[f]:o[f],l=u[f];null==c?l.onerror&&l.onerror(n[f]):l.onsuccess&&l.onsuccess("put"===t.type&&e[f]?t.values[f]:c)}return{failures:n,results:i,numFailures:a,lastResult:s}})).catch((function(e){return u.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}}})}})}},_r=function(){function r(t,n){var i=this;this._middlewares={},this.verno=0;var o=r.dependencies;this._options=n=e({addons:r.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var u=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={};var a={dbOpenError:this.idbdb=null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ee,dbReadyPromise:null,cancelOpen:ee,openCanceller:null,autoSchema:!0};a.dbReadyPromise=new je((function(e){a.dbReadyResolve=e})),a.openCanceller=new je((function(e,t){a.cancelOpen=t})),this._state=a,this.name=t,this.on=St(this,"populate","blocked","versionchange",{ready:[se,ee]}),this.on.ready.subscribe=y(this.on.ready.subscribe,(function(e){return function(t,n){r.vip((function(){var r=i._state;if(r.openComplete)r.dbOpenError||je.resolve().then(t),n&&e(t);else if(r.onReadyBeingFired)r.onReadyBeingFired.push(t),n&&e(t);else{e(t);var o=i;n||e((function e(){o.on.ready.unsubscribe(t),o.on.ready.unsubscribe(e)}))}}))}})),this.Collection=function(e){return Ot(Mt.prototype,(function(t,r){this.db=e;var n=kt,i=null;if(r)try{n=r()}catch(t){i=t}var o=t._ctx,u=o.table,a=u.hook.reading.fire;this._ctx={table:u,index:o.index,isPrimKey:!o.index||u.schema.primKey.keyPath&&o.index===u.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:o.or,valueMapper:a!==te?a:null}}))}(this),this.Table=function(e){return Ot(Bt.prototype,(function(t,r,n){this.db=e,this._tx=n,this.name=t,this.schema=r,this.hook=e._allTables[t]?e._allTables[t].hook:St(null,{creating:[ie,ee],reading:[re,te],updating:[ue,ee],deleting:[oe,ee]})}))}(this),this.Transaction=function(e){return Ot(Ht.prototype,(function(t,r,n,i){var o=this;this.db=e,this.mode=t,this.storeNames=r,this.schema=n,this.idbtrans=null,this.on=St(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new je((function(e,t){o._resolve=e,o._reject=t})),this._completion.then((function(){o.active=!1,o.on.complete.fire()}),(function(e){var t=o.active;return o.active=!1,o.on.error.fire(e),o.parent?o.parent._reject(e):t&&o.idbtrans&&o.idbtrans.abort(),lt(e)}))}))}(this),this.Version=function(e){return Ot(dr.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}))}(this),this.WhereClause=function(e){return Ot(Yt.prototype,(function(t,r,n){this.db=e,this._ctx={table:t,index:":id"===r?null:r,or:n};var i=e._deps.indexedDB;if(!i)throw new J.MissingAPI("indexedDB API missing");this._cmp=this._ascending=i.cmp.bind(i),this._descending=function(e,t){return i.cmp(t,e)},this._max=function(e,t){return 0<i.cmp(e,t)?e:t},this._min=function(e,t){return i.cmp(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(e){0<e.newVersion?console.warn("Another connection wants to upgrade database '"+i.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+i.name+"'. Closing db now to resume the delete request."),i.close()})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+i.name+"') was blocked"):console.warn("Upgrade '"+i.name+"' blocked by other connection holding version "+e.oldVersion/10)})),this._maxKey=$t(n.IDBKeyRange),this._createTransaction=function(e,t,r,n){return new i.Transaction(e,t,r,n)},this._fireOnBlocked=function(e){i.on("blocked").fire(e),mt.filter((function(e){return e.name===i.name&&e!==i&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(br),this.use(wr),u.forEach((function(e){return e(i)}))}return r.prototype.version=function(e){if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new J.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,r=t.filter((function(t){return t._cfg.version===e}))[0];return r||(r=new this.Version(e),t.push(r),t.sort(fr),this._state.autoSchema=!1,r)},r.prototype._whenReady=function(e){var t=this;return this._state.openComplete||Pe.letThrough?e():new je((function(e,r){if(!t._state.isBeingOpened){if(!t._options.autoOpen)return void r(new J.DatabaseClosed);t.open().catch(ee)}t._state.dbReadyPromise.then(e,r)})).then(e)},r.prototype.use=function(e){var t=e.stack,r=e.create,n=e.level,i=e.name;i&&this.unuse({stack:t,name:i});var o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:r,level:null==n?10:n,name:i}),o.sort((function(e,t){return e.level-t.level})),this},r.prototype.unuse=function(e){var t=e.stack,r=e.name,n=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return n?e.create!==n:!!r&&e.name!==r}))),this},r.prototype.open=function(){return vr(this)},r.prototype.close=function(){var e=mt.indexOf(this),t=this._state;if(0<=e&&mt.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}this._options.autoOpen=!1,t.dbOpenError=new J.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError),t.dbReadyPromise=new je((function(e){t.dbReadyResolve=e})),t.openCanceller=new je((function(e,r){t.cancelOpen=r}))},r.prototype.delete=function(){var e=this,t=0<arguments.length,r=this._state;return new je((function(n,i){function o(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=Ve((function(){pr.remove(e.name),n()})),t.onerror=Gt(i),t.onblocked=e._fireOnBlocked}if(t)throw new J.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()}))},r.prototype.backendDB=function(){return this.idbdb},r.prototype.isOpen=function(){return null!==this.idbdb},r.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},r.prototype.hasFailed=function(){return null!==this._state.dbOpenError},r.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(r.prototype,"tables",{get:function(){var e=this;return t(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:!0,configurable:!0}),r.prototype.transaction=function(){var e=function(e,t,r){var n=arguments.length;if(n<2)throw new J.InvalidArgument("Too few arguments");for(var i=new Array(n-1);--n;)i[n-1]=arguments[n];return r=i.pop(),[e,x(i),r]}.apply(this,arguments);return this._transaction.apply(this,e)},r.prototype._transaction=function(e,t,r){var n=this,i=Pe.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var o,u,a=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(u=t.map((function(e){var t=e instanceof n.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||e===Et)o=Et;else{if("rw"!=e&&e!=xt)throw new J.InvalidArgument("Invalid transaction mode: "+e);o=xt}if(i){if(i.mode===Et&&o===xt){if(!a)throw new J.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&u.forEach((function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!a)throw new J.SubTransaction("Table "+e+" not included in parent transaction.");i=null}})),a&&i&&!i.active&&(i=null)}}catch(r){return i?i._promise(null,(function(e,t){t(r)})):lt(r)}var s=function(e,t,r,n,i){return je.resolve().then((function(){var o,u=Pe.transless||Pe,a=e._createTransaction(t,r,e._dbSchema,n),s={trans:a,transless:u};n?a.idbtrans=n.idbtrans:a.create(),et();var f=je.follow((function(){if(o=i.call(a,a))if(o.constructor===me){var e=tt.bind(null,null);o.then(e,e)}else tt(),"function"==typeof o.next&&"function"==typeof o.throw&&(o=mr(o));else tt()}),s);return(o&&"function"==typeof o.then?je.resolve(o).then((function(e){return a.active?e:lt(new J.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):f.then((function(){return o}))).then((function(e){return n&&a._resolve(),a._completion.then((function(){return e}))})).catch((function(e){return a._reject(e),lt(e)}))}))}.bind(null,this,o,u,i,r);return i?i._promise(o,s,"lock"):Pe.trans?ut(Pe.transless,(function(){return n._whenReady(s)})):this._whenReady(s)},r.prototype.table=function(e){if(!a(this._allTables,e))throw new J.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},r}(),Er=_r;return s(Er,e({},Z,{delete:function(e){return new Er(e).delete()},exists:function(e){return new Er(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){return pr?pr.getDatabaseNames().then(e):je.resolve([])},defineClass:function(){return function(e){i(this,e)}},ignoreTransaction:function(e){return Pe.trans?ut(Pe.transless,e):e()},vip:yr,async:function(e){return function(){try{var t=mr(e.apply(this,arguments));return t&&"function"==typeof t.then?t:je.resolve(t)}catch(t){return lt(t)}}},spawn:function(e,t,r){try{var n=mr(e.apply(r,t||[]));return n&&"function"==typeof n.then?n:je.resolve(n)}catch(e){return lt(e)}},currentTransaction:{get:function(){return Pe.trans||null}},waitFor:function(e,t){var r=je.resolve("function"==typeof e?Er.ignoreTransaction(e):e).timeout(t||6e4);return Pe.trans?Pe.trans.waitFor(r):r},Promise:je,debug:{get:function(){return M},set:function(e){F(e,"dexie"===e?function(){return!0}:ht)}},derive:l,extend:i,props:s,override:y,Events:St,getByKeyPath:b,setByKeyPath:w,delByKeyPath:function(e,t){"string"==typeof t?w(e,t,void 0):"length"in t&&[].map.call(t,(function(t){w(e,t,void 0)}))},shallowClone:_,deepClone:S,getObjectDiff:C,asap:m,minKey:-1/0,addons:[],connections:mt,errnames:X,dependencies:function(){try{return{indexedDB:n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB,IDBKeyRange:n.IDBKeyRange||n.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:pt,version:pt.split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,r){return e+t/Math.pow(10,2*r)})),default:Er,Dexie:Er})),Er.maxKey=$t(Er.dependencies.IDBKeyRange),function(e){try{pr=function(e){var t,r=e&&(e.getDatabaseNames||e.webkitGetDatabaseNames);if(!r){var n=new _r(_t,{addons:[]});n.version(1).stores({dbnames:"name"}),t=n.table("dbnames")}return{getDatabaseNames:function(){return r?new je((function(t,n){var i=r.call(e);i.onsuccess=function(e){return t(d(e.target.result,0))},i.onerror=Gt(n)})):t.toCollection().primaryKeys()},add:function(e){return!r&&e!==_t&&t.put({name:e}).catch(ee)},remove:function(e){return!r&&e!==_t&&t.delete(e).catch(ee)}}}(e)}catch(e){}}(_r.dependencies.indexedDB),je.rejectionMapper=function(e,t){if(!e||e instanceof Y||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Q[e.name])return e;var r=new Q[e.name](t||e.message,e);return"stack"in e&&c(r,"stack",{get:function(){return this.inner.stack}}),r},F(M,ht),_r}));var IDB=createStore(),Buffer=buffer.Buffer;function createStore(){var e=new Dexie("ProjectStore");return e.version(1).stores({projects:"pid, name, hash, repo",files:"id, &path, &fid, type, hash",folders:"id, &path, hash",data:"fid",libraries:"url",sessions:"pid",meta:"key"}),e.version(2).stores({projects:"pid",files:"id, &path, &fid",folders:"id, &path",data:"fid",libraries:"url",meta:"key"}).upgrade(e=>Promise.all([e.projects.filter(e=>!e.dir).modify(e=>{var t=e.ref?`${e.pid}:${e.ref.split("/").pop()}`:e.pid;e.olddir=t,e.dir=`${t}/${e.name}`}),e.folders.filter(e=>e.deleted).delete(),e.files.filter(e=>e.deleted).delete(),e.data.filter(e=>"base64"===e.encoding).modify(e=>{e.text=castAsReadableArrayBuffer(Buffer.from(e.text,"base64")),e.encoding="binary"})])),e}var GlobalErrorCodes={ProjectNotFound:"project:404",FileNotFound:"file:404",FolderNotFound:"folder:404",INodeNotFound:"inode:404",LibraryNotFound:"library:404",EditorSessionNotLinked:"editor:404",GitOperationTimeout:"git:408",AcquireLockFileFail:"lock:500",CriticalDeletionError:"delete:500"},$warn=console?console.warn:()=>{},DFS=new AndroidFileSystemClass,GFS=new GitFileSystemClass(DFS),ENV={resource:function(e){return`/run/${e}`},projectConfigPathAsync:function(){return ENV.filesDirAsync(".projects")},settingsConfigPathAsync:function(){return ENV.filesDirAsync(".settings")},metadataDirAsync:function(e){return ENV.filesDirAsync().then(t=>{return`${t}.metadata/${(e||"").replace(t,"")}`})},trashDirAsync:function(e){return ENV.filesDirAsync().then(t=>{return`${t}.trash/${(e||"").replace(t,"")}`})},filesDirAsync:function(e){return e=e||"",ENV.systemDirAsync().then(t=>`${t||"idb/"}${e}`)},systemDirAsync:function(){return new Promise((function(e){DFS.supported?function e(t,r){r=r||0;try{t(DFS.getDirectory())}catch(n){r<10?(r++,setTimeout(()=>{$console.warn(`Attempting establishing JavaScript bridge (${r}/10)`),e(t,r)},150)):t(null)}}(e):e(null)}))}};function ObservableClass(){var e=[];Object.assign(this,{subscriptions:e,subscribe:function(t){return e.push(t),{unsubscribe:()=>{e.includes(t)&&e.splice(e.indexOf(t),1)}}},run:function(t){return Promise.all(e.map(e=>e(t)))}})}function AndroidFileSystemClass(){var e,t=[],r=Object.create(null);try{e=window.Android||self.Android}catch(e){$warn(e.message)}function n(e){switch(e){case"{}":return Promise.resolve(r);case"[]":return Promise.resolve(t);default:var n=tryParseJSON(e);return n.status?Promise.reject(n):Promise.resolve(n)}}e?this.supported=!!(e.getDirectory&&e.mkdirp&&e.exists&&e.readFile&&e.remove&&e.readlink&&e.writelink&&e.write&&e.readdir&&e.readdirDeep&&e.lstat&&e.mv&&e.appVersion()>=19):($warn("AndroidFileSystem is not operational: interface missing"),this.supported=!1),Object.assign(this,{getDirectory:()=>this._directory||(this._directory=e.getDirectory()),readFile:(t,r)=>n(e.readFile(t,r)).then(({contents:e})=>"utf8"===r?e:Buffer.from(e,"base64")),remove:t=>t===this._directory?Promise.reject({source:"AndroidFileSystemClass",fn:"remove",message:"Critical deletion error.",code:GlobalErrorCodes.CriticalDeletionError}):n(e.remove(t)),readlink:t=>n(e.readlink(t)).then(({contents:e})=>e),writelink:(t,r)=>n(e.writelink(t,r)),write:(t,r,i)=>n(e.write(t,r,!!i)),exists:t=>Promise.resolve(e.exists(t)),mkdirp:t=>n(e.mkdirp(t)).then(({contents:e})=>e),readdir:t=>n(e.readdir(t)).catch(()=>null),readdirDeep:(t,r,i)=>n(e.readdirDeep(t,r,i)),lstat:function(t){return n(e.lstat(t)).then(e=>new Stats(function(e){var t=e.st_mtime||e.mtimeMs,r=e.st_ctime||e.ctimeMs,n=e.st_atime||e.atimeMs;return Object.assign(e,{mtimeMs:1e3*t,ctimeMs:1e3*r,atimeMs:1e3*n}),e}(e)),()=>null)},mv:function(t,r){return n(e.mv(t,r)).then(({contents:e})=>e)},writeExternal:function(t,r,i){if(e&&e.writeExternal)return n(e.writeExternal(t,r,!!i))}}),this.supported||$warn("AndroidFileSystem is not operational: interface mismatch")}function GitFileSystemClass(e){var t="GitFileSystemClass",r=IDB,n=new LFUCache(9e3,0),i=new LFUCache(50,.5),o=new LFUCache(500,.5),u=new LFUCache(800,.8),a=new LFUCache(50,.5),s=new ObservableClass;function f(e){return r.folders.get({path:e}).then(t=>t||w(e).then(t=>{if(t&&t!==e)return f(t)}))}function c(e){return r.files.get({path:e}).then(e=>e&&e.target?c(e.target):e)}function l(t,u,l={}){return t=x(t),u=x(u),t===u?Promise.resolve():(i.clear(),o.del(t),o.del(A(t)),a.keys().filter(e=>e.startsWith(t)||e.startsWith(e)).forEach(e=>a.del(e)),(e.supported&&!B(t)?e.mv(t,u):c(t).then(e=>{if(e){var n=Date.now();return p(A(u)).then(()=>r.files.update(e.id,{path:u,mtimeMs:n})).then(()=>"file")}return f(t).then(e=>{if(e){var n=Date.now();return Promise.all([p(A(u)),r.files.where("path").startsWith(t+"/").modify(e=>{e.path=u+e.path.slice(t.length),e.mtimeMs=n}),r.folders.where("path").startsWith(t+"/").modify(e=>{e.path=u+e.path.slice(t.length),e.mtimeMs=n}),r.folders.update(e.id,{path:u,mtimeMs:n})]).then(()=>"folder")}})})).then(e=>{if("file"===e)n.rename(t,u);else if("folder"===e){var r=t+"/";n.keys().filter(e=>e.startsWith(r)).forEach(e=>{n.rename(e,e.replace(t,u))})}if(e){var{updateStatus:i}=l;return s.run({action:"mv",updateStatus:i,oldpath:t,path:u,type:e}).then(()=>({oldpath:t,path:u,type:e}))}}))}function h(n,i={}){n=x(n);var o=i.encoding;return e.supported&&!B(n)?e.readFile(n,o):c(n).then(e=>e?r.data.get(e.fid).then(e=>{var t=e&&e.text||"",r=e&&e.encoding||"";return r?"utf8"===o&&"utf8"===r?t:o?Buffer.from(t,r).toString(o):Buffer.from(t,r):"utf8"===o?t:o?Buffer.from(t).toString(o):Buffer.from(t)}):Promise.reject({source:t,fn:"read",message:"Could not find file.",filepath:n,code:GlobalErrorCodes.FileNotFound}))}function p(t){var n;if(t=x(t),e.supported&&!B(t))n=e.mkdirp(t);else{var u=t.split("/").map((e,t,r)=>r.slice(0,t+1).join("/"));n=r.folders.where("path").anyOf(u).keys(e=>{var t=u.filter(t=>!e.includes(t));return t.length>0&&function(e){var t=Date.now(),n=e.map(e=>({id:_(),path:e,mtimeMs:t,ctimeMs:t}));return r.folders.bulkAdd(n)}(t)})}return n.then(e=>{if(e)return i.clear(),t.split("/").slice(0,-1).forEach((e,t,r)=>{o.del(r.slice(0,t+1).join("/"))}),s.run({action:"mkdir",path:t,type:"folder"})})}function d(t,n,u){t=x(t),n=n||"";var{mode:f,target:l,updateStatus:h}=u||{};return p(A(t)).then(()=>{i.clear(),o.del(A(t)),a.del(t);var u=function(e){return e instanceof ArrayBuffer||e&&e.buffer instanceof ArrayBuffer&&void 0!==e.byteLength}(n);return(e.supported&&!B(t)?e.write(t,u?Buffer.from(n).toString("base64"):n,u):c(t).then(e=>{var i=Date.now(),o=e?e.id:_(),a=e?e.ctimeMs:i,s=u?castAsReadableArrayBuffer(n):n,c={id:o,fid:o,path:t,mode:f,target:l,ctimeMs:a,mtimeMs:i,size:s.byteLength||s.length};return r.files.put(c).then(()=>{var e={fid:o,text:s,encoding:u?"binary":"utf8"};return r.data.put(e).then(()=>c)})})).then(({mtimeMs:e,size:r,mode:n})=>s.run({action:"write",path:t,type:"file",updateStatus:h}).then(()=>({mode:n,mtimeMs:e,type:"file",ino:0,size:r})))})}function y(t,u={}){var{tmpDir:f,updateStatus:c}=u,h=(t=x(t))+"/";if(n.keys().filter(e=>e.startsWith(h)).forEach(e=>n.del(e)),f)return l(t,f+t,{updateStatus:c});var p=e.supported&&!B(t)?e.remove(t):Promise.all([r.folders.where("path").equals(t).delete(),r.files.where("path").startsWith(h).delete(),r.folders.where("path").startsWith(h).delete()]);return o.del(t),o.del(A(t)),i.clear(),a.keys().filter(e=>e.startsWith(h)).forEach(e=>a.del(e)),p.then(()=>s.run({action:"rmdir",updateStatus:c,oldpath:t,path:null,type:"folder"})).then(()=>m(t,"folder"))}function v(t){return e.supported&&!B(t)?g(t).then(e=>e?e.length:null):r.files.where("path").startsWith(x(t)+"/").count()}function m(e,t){var r=A(e);return"."===r||""===r?Promise.resolve({oldpath:e,path:null,type:t}):v(r).then(n=>0===n?y(r):{oldpath:e,path:null,type:t})}function g(t){t=x(t);var n=o.get(t);return void 0!==n?Promise.resolve(n):e.supported&&!B(t)?e.readdir(t).then(e=>(e&&e.sort(E),o.set(t,e))):f(t).then(e=>{if(e){var n=e.path+"/",i=n.length;return Promise.all([r.folders.where("path").startsWith(n).filter(e=>!e.path.slice(i).includes("/")).keys(),r.files.where("path").startsWith(n).filter(e=>!e.path.slice(i).includes("/")).keys()]).then(([e,r])=>{var n=e.concat(r).map(e=>e.slice(i));return n.sort(E),o.set(t,n)})}return o.set(t,null)})}function b(t){t=x(t);var n=a.get(t);return void 0!==n?Promise.resolve(n):e.supported&&!B(t)?e.lstat(t).then(e=>a.set(t,e)):r.files.get({path:t}).then(e=>e?e.target?a.set(t,new Stats({size:e.size||0,mode:FileTypeModes.SYMLINK,mtimeMs:e.mtimeMs,ctimeMs:e.ctimeMs})):a.set(t,new Stats({size:e.size||0,mode:FileTypeModes.FILE,mtimeMs:e.mtimeMs,ctimeMs:e.ctimeMs})):r.folders.get({path:t}).then(e=>e?a.set(t,new Stats({size:0,mode:FileTypeModes.DIRECTORY,mtimeMs:e.mtimeMs,ctimeMs:e.ctimeMs})):a.set(t,null)))}function w(t){return t=x(t),e.supported&&!B(t)?Promise.resolve(e.readlink(t)):r.files.get({path:t}).then(e=>e&&e.target||null)}function _(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function E(e,t){return-(e<t)||+(e>t)}function x(e){var t=u.get(e);if(t)return t;if(e.indexOf("\0")>=0)throw new Error("Path must be a string without null bytes.");if(""===e)throw new Error("Path must not be empty.");return u.set(e,e.split("/").filter((e,t)=>(""!==e||0===t)&&"."!==e).join("/"))}function A(e){var t=e.lastIndexOf("/");return-1===t?".":0===t?"/":e.slice(0,t)}function k(e){var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function B(e){return e.startsWith("idb/")}Object.assign(this,{read:function(e,t={}){return h(e,t).catch(()=>null)},readFile:h,rmdir:y,rm:function(t,u={}){var{tmpDir:f,updateStatus:c}=u;return t=x(t),f?l(t,`${f}${t}~${_()}`,{updateStatus:c}):(i.clear(),(e.supported&&!B(t)?e.remove(t).then(e=>(o.del(A(t)),o.del(t),a.clear(),e)):r.files.get({path:t}).then(e=>{if(e)return o.del(A(t)),a.del(t),Promise.all([r.files.delete(e.id),r.data.delete(e.fid)]).then(()=>!0)})).then(e=>{if(e){n.del(t);return s.run({action:"rm",updateStatus:c,oldpath:t,path:null,type:"file"}).then(()=>m(t,"file")).then(()=>({oldpath:t,path:null,type:"file"}))}return y(t,{updateStatus:c})}))},readlink:w,readdir:g,readdirDeep:function(t,n){var{files:o=!0,folders:u=!1,relative:a=!1}=n||{},s=(t=x(t))+"/",f=s.length,c=`(dirname=${t},files=${o},folders=${u},relative=${a})`,l=i.get(c);return l?Promise.resolve(l):(e.supported&&!B(t)?e.readdirDeep(t,o,u):Promise.all([u?r.folders.where("path").startsWith(s).keys():[],o?r.files.where("path").startsWith(s).keys():[]]).then(([e,t])=>e.concat(t))).then(e=>i.set(c,a?e.map(e=>e.slice(f)):e))},lstat:b,exists:function(t){return t=x(t),e.supported&&!B(t)?Promise.resolve(e.exists(t)):c(t).then(e=>!!e||f(t).then(e=>!!e))},writelink:function(t,r){t=x(t);var n=r.toString("utf8");if(i.clear(),o.del(A(t)),a.del(t),e.supported&&!B(t))return p(A(t)).then(()=>e.writelink(t,n));return d(t,"",{target:n,mode:FileType.SYMLINK}).then(({mode:e,mtimeMs:t})=>({mode:e,type:"symlink",target:n,size:0,mtimeMs:t}))},write:d,mkdir:p,size:function(e){return b(e).then(e=>e&&e.size||0)},mv:l,migrate:function(e,t,n){return e=x(e),t=x(t),r.files.where("path").startsWith(e+"/").toArray().then(i=>{var o=i.length,u=0;return PromisePool({data:i,promiseGenerator:function(i){return r.data.get(i.fid).then(r=>{if(i&&i.path)return d(i.path.replace(e,t),r.text).then(()=>{n({loaded:u+=1,total:o,phase:"Migrating files"})})})},maxConcurrency:6,retryAttempts:0,useRaf:!0})})},fileCount:v,inode:function(e,t){return Promise.resolve(!t&&n.get(e)||n.set(e,_()))},inodePath:function(e){var r=n.find(e);return r?Promise.resolve(r):Promise.reject({source:t,fn:"inodePath",message:"Could not find inode.",inode:e,code:GlobalErrorCodes.INodeNotFound})},dirname:A,basename:k,ext:function(e){var t=k(e),r=t.lastIndexOf(".");return-1==r?"":t.substr(r).toLowerCase()},join:function(e,t){return null==e||null==t?null:e.replace(/\/$/,"")+"/"+t.replace(/^\//,"")},relativeTo:function(e,t){return t?e.slice(t.length+1):e},childOf:function(e,t){return!!e&&(e=x(e),t=x(t),e.startsWith(t+"/")||e===t)},observable:s,isIDB:B,isBinaryContent:function(e){return Buffer.from(e.slice(0,8e3)).some(e=>0===e)},normalizePath:x,writeExternal:function(t,r,n){return e.supported&&e.writeExternal(t,r,n)},saveBase64:function(e,t){AndroidRef&&AndroidRef.saveBase64?AndroidRef.saveBase64(Buffer.from(t).toString("base64"),e):saveAs(new Blob([t]),e)},uuid4:_})}GFS||$warn("GFS not initialized.");var FileType={FILE:32768,DIRECTORY:16384,SYMLINK:40960},FileTypeModes={FILE:33188,DIRECTORY:16384,SYMLINK:40960};function Stats({size:e,mode:t,atimeMs:r=null,mtimeMs:n,ctimeMs:i}){var o=0;"number"!=typeof r&&(r=o=Date.now()),"number"!=typeof n&&(n=o=o||Date.now()),"number"!=typeof i&&(i=o=o||Date.now());var u=this;Object.assign(u,{size:e,atimeMs:r,ctimeMs:i,mtimeMs:n,isFile:function(){return(61440&u.mode)===FileType.FILE},isDirectory:function(){return(61440&u.mode)===FileType.DIRECTORY},isSymbolicLink:function(){return(61440&u.mode)===FileType.SYMLINK},chmod:function(e){this.mode=61440&u.mode|e},toBuffer:function(){var e=Buffer.alloc(32);return e.writeUInt32LE(u.size,0),e.writeUInt32LE(u.mode,4),e.writeDoubleLE(u.atime.getTime(),8),e.writeDoubleLE(u.mtime.getTime(),16),e.writeDoubleLE(u.ctime.getTime(),24),e},uid:0,gid:0,ino:0,mode:function(e){var t=e>0?e>>12:0;4!==t&&8!==t&&10!==t&&14!==t&&(t=8);var r=511&e;r=73&r?493:420;8!==t&&(r=0);return(t<<12)+r}(t)}),Object.defineProperties(u,{atime:{get:()=>new Date(u.atimeMs)},mtime:{get:()=>new Date(u.mtimeMs)},ctime:{get:()=>new Date(u.ctimeMs)}})}function tryParseJSON(e){try{return JSON.parse(e)||{}}catch(e){return{}}}function castAsReadableArrayBuffer(e){if(e instanceof ArrayBuffer)return e;if(e instanceof Uint8Array)return 0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(Buffer.isBuffer(e))return e.buffer;throw new Error("Argument type not recognized: "+typeof e)}function concatArrayBuffers(e,t){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e),0),r.set(new Uint8Array(t),e.byteLength),r.buffer}